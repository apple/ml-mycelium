import{v as k}from"../chunks/stores.BEpXIDt_.js";import{s as w,a as $,B as m,o as x,f as u,d as M,i as p,e as V,c as D,g as N,h as S,n as _}from"../chunks/scheduler.BZf3Antt.js";import{S as P,i as T,b as f,e as y,t as d,g,c as j,a as q,m as z,d as B}from"../chunks/index.C7bWdOrd.js";import{V as C}from"../chunks/Viewer.C5t0eI9O.js";import{c as E}from"../chunks/dot.Bgkvpxeo.js";import{c as H}from"../chunks/index.BeFZgILa.js";async function L({url:n,fetch:o}){const t=n.searchParams.get("url");if(t){const e=await o(t);if(e.url.endsWith(".onnx")){const r=await e.arrayBuffer();k.set({kind:"onnx",data:new Uint8Array(r)})}else if(e.url.endsWith(".dot")){const r=await e.text();k.set({kind:"dot",data:r})}else throw new Error(`unsupported file format: ${e.url}`)}}const R=Object.freeze(Object.defineProperty({__proto__:null,load:L},Symbol.toStringTag,{value:"Module"}));function O(n){let o,t='<div class="flex flex-col items-center"><svg width="200" height="200"><rect x="10" y="10" width="180" height="180" rx="12" fill="none" stroke="black" stroke-opacity="0.2" stroke-width="5" stroke-dasharray="12"></rect></svg> <div class="opacity-40">Drop file here...</div></div>';return{c(){o=V("div"),o.innerHTML=t,this.h()},l(e){o=D(e,"DIV",{class:!0,"data-svelte-h":!0}),N(o)!=="svelte-19u92z9"&&(o.innerHTML=t),this.h()},h(){S(o,"class","grid w-full h-full place-items-center bg-gray-quaternary")},m(e,r){p(e,o,r)},p:_,i:_,o:_,d(e){e&&u(o)}}}function U(n){let o=n[0],t,e,r=v(n);return{c(){r.c(),t=m()},l(s){r.l(s),t=m()},m(s,i){r.m(s,i),p(s,t,i),e=!0},p(s,i){i&1&&w(o,o=s[0])?(g(),f(r,1,1,_),y(),r=v(s),r.c(),d(r,1),r.m(t.parentNode,t)):r.p(s,i)},i(s){e||(d(r),e=!0)},o(s){f(r),e=!1},d(s){s&&u(t),r.d(s)}}}function v(n){let o,t;return o=new C({props:{title:"Viewer",network:n[0]}}),{c(){j(o.$$.fragment)},l(e){q(o.$$.fragment,e)},m(e,r){z(o,e,r),t=!0},p(e,r){const s={};r&1&&(s.network=e[0]),o.$set(s)},i(e){t||(d(o.$$.fragment,e),t=!0)},o(e){f(o.$$.fragment,e),t=!1},d(e){B(o,e)}}}function W(n){let o,t,e,r,s;const i=[U,O],l=[];function b(a,c){return a[0]?0:1}return t=b(n),e=l[t]=i[t](n),{c(){o=$(),e.c(),r=m(),this.h()},l(a){x("svelte-1te25ve",document.head).forEach(u),o=M(a),e.l(a),r=m(),this.h()},h(){document.title="Viewer â€¢ Mycelium"},m(a,c){p(a,o,c),l[t].m(a,c),p(a,r,c),s=!0},p(a,[c]){let h=t;t=b(a),t===h?l[t].p(a,c):(g(),f(l[h],1,1,()=>{l[h]=null}),y(),e=l[t],e?e.p(a,c):(e=l[t]=i[t](a),e.c()),d(e,1),e.m(r.parentNode,r))},i(a){s||(d(e),s=!0)},o(a){f(e),s=!1},d(a){a&&(u(o),u(r)),l[t].d(a)}}}function A(n,o,t){let e;return k.subscribe(r=>{switch(r?.kind){case void 0:break;case"dot":t(0,e=E(r.data));break;case"onnx":t(0,e=H(r.data));break}}),[e]}class X extends P{constructor(o){super(),T(this,o,A,W,w,{})}}export{X as component,R as universal};
