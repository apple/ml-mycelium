import{S as ae,i as le,t as P,g as ce,e as fe,b as D,c as Z,a as oe,m as Q,d as J,f as Oo}from"./index.C7bWdOrd.js";import{n as Y,s as se,k as Ur,D as V,E as F,b as L,f as E,h as p,i as I,u as Kr,l as Zr,m as Qr,G as Jr,N as Qe,B as G,C as Ie,a as Ce,t as Ae,d as Te,v as Re,j as B,w as _t,z as H,A as Gt,p as nt,a2 as ei,x as ti,a3 as ue,a4 as Po,L as Lo,r as Xe,e as ne,c as re,q as ni,g as rt,a5 as Io,a6 as Ao,a7 as Wn,O as xt,a8 as Zt}from"./scheduler.BZf3Antt.js";import{e as ge,g as Je,u as St,o as Ot}from"./spread.CUGnlXHs.js";import{w as ln}from"./index.DrtbdpeK.js";const ri=typeof window<"u";let Ro=ri?()=>window.performance.now():()=>Date.now(),ii=ri?t=>requestAnimationFrame(t):Y;const Ue=new Set;function oi(t){Ue.forEach(e=>{e.c(t)||(Ue.delete(e),e.f())}),Ue.size!==0&&ii(oi)}function Do(t){let e;return Ue.size===0&&ii(oi),{promise:new Promise(n=>{Ue.add(e={c:t,f:n})}),abort(){Ue.delete(e)}}}const ye={black:"#000000",white:"#ffffff",foreground:{blue:"#0066CC",red:"#E30000",orange:"#BF4800",yellow:"#D08B00",green:"#008009",purple:"#6D56D6",gray:"#1D1D1F",graySecondary:"#6E6E73",graySecondaryAlt:"#515154",grayTertiary:"#86868B"},background:{gray:"rgb(250, 250, 250)",darkGray:"rgb(51,51,51)"}},jt={family:"SF Mono, ui-monospace, monospace",weight:{regular:200,semibold:500,bold:600}};let un=class st{x;y;k;constructor(e,n,r){this.x=e,this.y=n,this.k=r}static identity(){return new st(0,0,1)}translate(e,n){return e===0&&n===0?this:new st(this.x+this.k*e,this.y+this.k*n,this.k)}scale(e){return e===1?this:new st(this.x,this.y,this.k*e)}apply(e,n){return{x:e*this.k+this.x,y:n*this.k+this.y}}inverse(){return st.identity().scale(1/this.k).translate(-this.x,-this.y)}toString(){return`translate(${this.x},${this.y}) scale(${this.k})`}};var Bo={value:()=>{}};function Mn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Pt(n)}function Pt(t){this._=t}function $o(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pt.prototype=Mn.prototype={constructor:Pt,on:function(t,e){var n=this._,r=$o(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Vo(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=zn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=zn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Pt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Vo(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function zn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bo,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var hn="http://www.w3.org/1999/xhtml";const Gn={svg:"http://www.w3.org/2000/svg",xhtml:hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Gn.hasOwnProperty(e)?{space:Gn[e],local:t}:t}function Fo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hn&&e.documentElement.namespaceURI===hn?e.createElement(t):e.createElementNS(n,t)}}function Wo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function si(t){var e=Yt(t);return(e.local?Wo:Fo)(e)}function zo(){}function Nn(t){return t==null?zo:function(){return this.querySelector(t)}}function Go(t){typeof t!="function"&&(t=Nn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,h,u=0;u<s;++u)(l=o[u])&&(h=t.call(l,l.__data__,u,o))&&("__data__"in l&&(h.__data__=l.__data__),a[u]=h);return new de(r,this._parents)}function jo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Yo(){return[]}function ai(t){return t==null?Yo:function(){return this.querySelectorAll(t)}}function Ho(t){return function(){return jo(t.apply(this,arguments))}}function qo(t){typeof t=="function"?t=Ho(t):t=ai(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,h=0;h<a;++h)(l=s[h])&&(r.push(t.call(l,l.__data__,h,s)),i.push(l));return new de(r,i)}function li(t){return function(){return this.matches(t)}}function ui(t){return function(e){return e.matches(t)}}var Xo=Array.prototype.find;function Uo(t){return function(){return Xo.call(this.children,t)}}function Ko(){return this.firstElementChild}function Zo(t){return this.select(t==null?Ko:Uo(typeof t=="function"?t:ui(t)))}var Qo=Array.prototype.filter;function Jo(){return Array.from(this.children)}function es(t){return function(){return Qo.call(this.children,t)}}function ts(t){return this.selectAll(t==null?Jo:es(typeof t=="function"?t:ui(t)))}function ns(t){typeof t!="function"&&(t=li(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,h=0;h<s;++h)(l=o[h])&&t.call(l,l.__data__,h,o)&&a.push(l);return new de(r,this._parents)}function hi(t){return new Array(t.length)}function rs(){return new de(this._enter||this._groups.map(hi),this._parents)}function Dt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Dt.prototype={constructor:Dt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function is(t){return function(){return t}}function os(t,e,n,r,i,o){for(var s=0,a,l=e.length,h=o.length;s<h;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Dt(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function ss(t,e,n,r,i,o,s){var a,l,h=new Map,u=e.length,c=o.length,f=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(f[a]=d=s.call(l,l.__data__,a,e)+"",h.has(d)?i[a]=l:h.set(d,l));for(a=0;a<c;++a)d=s.call(t,o[a],a,o)+"",(l=h.get(d))?(r[a]=l,l.__data__=o[a],h.delete(d)):n[a]=new Dt(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&h.get(f[a])===l&&(i[a]=l)}function as(t){return t.__data__}function ls(t,e){if(!arguments.length)return Array.from(this,as);var n=e?ss:os,r=this._parents,i=this._groups;typeof t!="function"&&(t=is(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),h=0;h<o;++h){var u=r[h],c=i[h],f=c.length,d=us(t.call(u,u&&u.__data__,h,r)),g=d.length,y=a[h]=new Array(g),T=s[h]=new Array(g),S=l[h]=new Array(f);n(u,c,y,T,S,d,e);for(var b=0,w=0,m,_;b<g;++b)if(m=y[b]){for(b>=w&&(w=b+1);!(_=T[w])&&++w<g;);m._next=_||null}}return s=new de(s,r),s._enter=a,s._exit=l,s}function us(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hs(){return new de(this._exit||this._groups.map(hi),this._parents)}function cs(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function fs(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var h=n[l],u=r[l],c=h.length,f=a[l]=new Array(c),d,g=0;g<c;++g)(d=h[g]||u[g])&&(f[g]=d);for(;l<i;++l)a[l]=n[l];return new de(a,this._parents)}function ds(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ps(t){t||(t=gs);function e(c,f){return c&&f?t(c.__data__,f.__data__):!c-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),h,u=0;u<a;++u)(h=s[u])&&(l[u]=h);l.sort(e)}return new de(i,this._parents).order()}function gs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ms(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ws(){return Array.from(this)}function _s(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ys(){let t=0;for(const e of this)++t;return t}function bs(){return!this.node()}function vs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function xs(t){return function(){this.removeAttribute(t)}}function Es(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ks(t,e){return function(){this.setAttribute(t,e)}}function Ms(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ns(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Cs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ts(t,e){var n=Yt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Es:xs:typeof e=="function"?n.local?Cs:Ns:n.local?Ms:ks)(n,e))}function ci(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ss(t){return function(){this.style.removeProperty(t)}}function Os(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ps(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ls(t,e,n){return arguments.length>1?this.each((e==null?Ss:typeof e=="function"?Ps:Os)(t,e,n??"")):et(this.node(),t)}function et(t,e){return t.style.getPropertyValue(e)||ci(t).getComputedStyle(t,null).getPropertyValue(e)}function Is(t){return function(){delete this[t]}}function As(t,e){return function(){this[t]=e}}function Rs(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ds(t,e){return arguments.length>1?this.each((e==null?Is:typeof e=="function"?Rs:As)(t,e)):this.node()[t]}function fi(t){return t.trim().split(/^|\s+/)}function Cn(t){return t.classList||new di(t)}function di(t){this._node=t,this._names=fi(t.getAttribute("class")||"")}di.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pi(t,e){for(var n=Cn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function gi(t,e){for(var n=Cn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Bs(t){return function(){pi(this,t)}}function $s(t){return function(){gi(this,t)}}function Vs(t,e){return function(){(e.apply(this,arguments)?pi:gi)(this,t)}}function Fs(t,e){var n=fi(t+"");if(arguments.length<2){for(var r=Cn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Vs:e?Bs:$s)(n,e))}function Ws(){this.textContent=""}function zs(t){return function(){this.textContent=t}}function Gs(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function js(t){return arguments.length?this.each(t==null?Ws:(typeof t=="function"?Gs:zs)(t)):this.node().textContent}function Ys(){this.innerHTML=""}function Hs(t){return function(){this.innerHTML=t}}function qs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Xs(t){return arguments.length?this.each(t==null?Ys:(typeof t=="function"?qs:Hs)(t)):this.node().innerHTML}function Us(){this.nextSibling&&this.parentNode.appendChild(this)}function Ks(){return this.each(Us)}function Zs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qs(){return this.each(Zs)}function Js(t){var e=typeof t=="function"?t:si(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ea(){return null}function ta(t,e){var n=typeof t=="function"?t:si(t),r=e==null?ea:typeof e=="function"?e:Nn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function na(){var t=this.parentNode;t&&t.removeChild(this)}function ra(){return this.each(na)}function ia(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oa(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sa(t){return this.select(t?oa:ia)}function aa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function la(t){return function(e){t.call(this,e,this.__data__)}}function ua(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ha(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ca(t,e,n){return function(){var r=this.__on,i,o=la(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function fa(t,e,n){var r=ua(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,h=a.length,u;l<h;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?ca:ha,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function mi(t,e,n){var r=ci(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function da(t,e){return function(){return mi(this,t,e)}}function pa(t,e){return function(){return mi(this,t,e.apply(this,arguments))}}function ga(t,e){return this.each((typeof e=="function"?pa:da)(t,e))}function*ma(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var wi=[null];function de(t,e){this._groups=t,this._parents=e}function yt(){return new de([[document.documentElement]],wi)}function wa(){return this}de.prototype=yt.prototype={constructor:de,select:Go,selectAll:qo,selectChild:Zo,selectChildren:ts,filter:ns,data:ls,enter:rs,exit:hs,join:cs,merge:fs,selection:wa,order:ds,sort:ps,call:ms,nodes:ws,node:_s,size:ys,empty:bs,each:vs,attr:Ts,style:Ls,property:Ds,classed:Fs,text:js,html:Xs,raise:Ks,lower:Qs,append:Js,insert:ta,remove:ra,clone:sa,datum:aa,on:fa,dispatch:ga,[Symbol.iterator]:ma};function ct(t){return typeof t=="string"?new de([[document.querySelector(t)]],[document.documentElement]):new de([[t]],wi)}function _a(t){let e;for(;e=t.sourceEvent;)t=e;return t}function jn(t,e){if(t=_a(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ya={passive:!1},ft={capture:!0,passive:!1};function Qt(t){t.stopImmediatePropagation()}function Ke(t){t.preventDefault(),t.stopImmediatePropagation()}function ba(t){var e=t.document.documentElement,n=ct(t).on("dragstart.drag",Ke,ft);"onselectstart"in e?n.on("selectstart.drag",Ke,ft):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function va(t,e){var n=t.document.documentElement,r=ct(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ke,ft),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Et=t=>()=>t;function cn(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:h,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:u}})}cn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function xa(t){return!t.ctrlKey&&!t.button}function Ea(){return this.parentNode}function ka(t,e){return e??{x:t.x,y:t.y}}function Ma(){return navigator.maxTouchPoints||"ontouchstart"in this}function Na(){var t=xa,e=Ea,n=ka,r=Ma,i={},o=Mn("start","drag","end"),s=0,a,l,h,u,c=0;function f(m){m.on("mousedown.drag",d).filter(r).on("touchstart.drag",T).on("touchmove.drag",S,ya).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,_){if(!(u||!t.call(this,m,_))){var k=w(this,e.call(this,m,_),m,_,"mouse");k&&(ct(m.view).on("mousemove.drag",g,ft).on("mouseup.drag",y,ft),ba(m.view),Qt(m),h=!1,a=m.clientX,l=m.clientY,k("start",m))}}function g(m){if(Ke(m),!h){var _=m.clientX-a,k=m.clientY-l;h=_*_+k*k>c}i.mouse("drag",m)}function y(m){ct(m.view).on("mousemove.drag mouseup.drag",null),va(m.view,h),Ke(m),i.mouse("end",m)}function T(m,_){if(t.call(this,m,_)){var k=m.changedTouches,C=e.call(this,m,_),A=k.length,W,X;for(W=0;W<A;++W)(X=w(this,C,m,_,k[W].identifier,k[W]))&&(Qt(m),X("start",m,k[W]))}}function S(m){var _=m.changedTouches,k=_.length,C,A;for(C=0;C<k;++C)(A=i[_[C].identifier])&&(Ke(m),A("drag",m,_[C]))}function b(m){var _=m.changedTouches,k=_.length,C,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<k;++C)(A=i[_[C].identifier])&&(Qt(m),A("end",m,_[C]))}function w(m,_,k,C,A,W){var X=o.copy(),K=jn(W||k,_),$,N,v;if((v=n.call(m,new cn("beforestart",{sourceEvent:k,target:f,identifier:A,active:s,x:K[0],y:K[1],dx:0,dy:0,dispatch:X}),C))!=null)return $=v.x-K[0]||0,N=v.y-K[1]||0,function O(j,He,we){var qe=K,xe;switch(j){case"start":i[A]=O,xe=s++;break;case"end":delete i[A],--s;case"drag":K=jn(we||He,_),xe=s;break}X.call(j,m,new cn(j,{sourceEvent:He,subject:v,target:f,identifier:A,active:xe,x:K[0]+$,y:K[1]+N,dx:K[0]-qe[0],dy:K[1]-qe[1],dispatch:X}),C)}}return f.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Et(!!m),f):t},f.container=function(m){return arguments.length?(e=typeof m=="function"?m:Et(m),f):e},f.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Et(m),f):n},f.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Et(!!m),f):r},f.on=function(){var m=o.on.apply(o,arguments);return m===o?f:m},f.clickDistance=function(m){return arguments.length?(c=(m=+m)*m,f):Math.sqrt(c)},f}function Tn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bt(){}var dt=.7,Bt=1/dt,Ze="\\s*([+-]?\\d+)\\s*",pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ca=/^#([0-9a-f]{3,8})$/,Ta=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),Sa=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),Oa=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${pt}\\)$`),Pa=new RegExp(`^rgba\\(${ke},${ke},${ke},${pt}\\)$`),La=new RegExp(`^hsl\\(${pt},${ke},${ke}\\)$`),Ia=new RegExp(`^hsla\\(${pt},${ke},${ke},${pt}\\)$`),Yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(bt,gt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Hn,formatHex:Hn,formatHex8:Aa,formatHsl:Ra,formatRgb:qn,toString:qn});function Hn(){return this.rgb().formatHex()}function Aa(){return this.rgb().formatHex8()}function Ra(){return yi(this).formatHsl()}function qn(){return this.rgb().formatRgb()}function gt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ca.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Xn(e):n===3?new he(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?kt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?kt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ta.exec(t))?new he(e[1],e[2],e[3],1):(e=Sa.exec(t))?new he(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Oa.exec(t))?kt(e[1],e[2],e[3],e[4]):(e=Pa.exec(t))?kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=La.exec(t))?Zn(e[1],e[2]/100,e[3]/100,1):(e=Ia.exec(t))?Zn(e[1],e[2]/100,e[3]/100,e[4]):Yn.hasOwnProperty(t)?Xn(Yn[t]):t==="transparent"?new he(NaN,NaN,NaN,0):null}function Xn(t){return new he(t>>16&255,t>>8&255,t&255,1)}function kt(t,e,n,r){return r<=0&&(t=e=n=NaN),new he(t,e,n,r)}function Da(t){return t instanceof bt||(t=gt(t)),t?(t=t.rgb(),new he(t.r,t.g,t.b,t.opacity)):new he}function fn(t,e,n,r){return arguments.length===1?Da(t):new he(t,e,n,r??1)}function he(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Tn(he,fn,_i(bt,{brighter(t){return t=t==null?Bt:Math.pow(Bt,t),new he(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new he(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new he(Ge(this.r),Ge(this.g),Ge(this.b),$t(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Un,formatHex:Un,formatHex8:Ba,formatRgb:Kn,toString:Kn}));function Un(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}`}function Ba(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}${ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kn(){const t=$t(this.opacity);return`${t===1?"rgb(":"rgba("}${Ge(this.r)}, ${Ge(this.g)}, ${Ge(this.b)}${t===1?")":`, ${t})`}`}function $t(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ge(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ze(t){return t=Ge(t),(t<16?"0":"")+t.toString(16)}function Zn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _e(t,e,n,r)}function yi(t){if(t instanceof _e)return new _e(t.h,t.s,t.l,t.opacity);if(t instanceof bt||(t=gt(t)),!t)return new _e;if(t instanceof _e)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new _e(s,a,l,t.opacity)}function $a(t,e,n,r){return arguments.length===1?yi(t):new _e(t,e,n,r??1)}function _e(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Tn(_e,$a,_i(bt,{brighter(t){return t=t==null?Bt:Math.pow(Bt,t),new _e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new _e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new he(Jt(t>=240?t-240:t+120,i,r),Jt(t,i,r),Jt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _e(Qn(this.h),Mt(this.s),Mt(this.l),$t(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$t(this.opacity);return`${t===1?"hsl(":"hsla("}${Qn(this.h)}, ${Mt(this.s)*100}%, ${Mt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Qn(t){return t=(t||0)%360,t<0?t+360:t}function Mt(t){return Math.max(0,Math.min(1,t||0))}function Jt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const bi=t=>()=>t;function Va(t,e){return function(n){return t+n*e}}function Fa(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Wa(t){return(t=+t)==1?vi:function(e,n){return n-e?Fa(e,n,t):bi(isNaN(e)?n:e)}}function vi(t,e){var n=e-t;return n?Va(t,n):bi(isNaN(t)?e:t)}const Jn=function t(e){var n=Wa(e);function r(i,o){var s=n((i=fn(i)).r,(o=fn(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),h=vi(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=h(u),i+""}}return r.gamma=t,r}(1);function Le(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,en=new RegExp(dn.source,"g");function za(t){return function(){return t}}function Ga(t){return function(e){return t(e)+""}}function ja(t,e){var n=dn.lastIndex=en.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=dn.exec(t))&&(i=en.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Le(r,i)})),n=en.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Ga(l[0].x):za(e):(e=l.length,function(h){for(var u=0,c;u<e;++u)a[(c=l[u]).i]=c.x(h);return a.join("")})}var er=180/Math.PI,pn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xi(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*er,skewX:Math.atan(l)*er,scaleX:s,scaleY:a}}var Nt;function Ya(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pn:xi(e.a,e.b,e.c,e.d,e.e,e.f)}function Ha(t){return t==null||(Nt||(Nt=document.createElementNS("http://www.w3.org/2000/svg","g")),Nt.setAttribute("transform",t),!(t=Nt.transform.baseVal.consolidate()))?pn:(t=t.matrix,xi(t.a,t.b,t.c,t.d,t.e,t.f))}function Ei(t,e,n,r){function i(h){return h.length?h.pop()+" ":""}function o(h,u,c,f,d,g){if(h!==c||u!==f){var y=d.push("translate(",null,e,null,n);g.push({i:y-4,x:Le(h,c)},{i:y-2,x:Le(u,f)})}else(c||f)&&d.push("translate("+c+e+f+n)}function s(h,u,c,f){h!==u?(h-u>180?u+=360:u-h>180&&(h+=360),f.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Le(h,u)})):u&&c.push(i(c)+"rotate("+u+r)}function a(h,u,c,f){h!==u?f.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Le(h,u)}):u&&c.push(i(c)+"skewX("+u+r)}function l(h,u,c,f,d,g){if(h!==c||u!==f){var y=d.push(i(d)+"scale(",null,",",null,")");g.push({i:y-4,x:Le(h,c)},{i:y-2,x:Le(u,f)})}else(c!==1||f!==1)&&d.push(i(d)+"scale("+c+","+f+")")}return function(h,u){var c=[],f=[];return h=t(h),u=t(u),o(h.translateX,h.translateY,u.translateX,u.translateY,c,f),s(h.rotate,u.rotate,c,f),a(h.skewX,u.skewX,c,f),l(h.scaleX,h.scaleY,u.scaleX,u.scaleY,c,f),h=u=null,function(d){for(var g=-1,y=f.length,T;++g<y;)c[(T=f[g]).i]=T.x(d);return c.join("")}}}var qa=Ei(Ya,"px, ","px)","deg)"),Xa=Ei(Ha,", ",")",")"),tt=0,at=0,ot=0,ki=1e3,Vt,lt,Ft=0,je=0,Ht=0,mt=typeof performance=="object"&&performance.now?performance:Date,Mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Sn(){return je||(Mi(Ua),je=mt.now()+Ht)}function Ua(){je=0}function Wt(){this._call=this._time=this._next=null}Wt.prototype=Ni.prototype={constructor:Wt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Sn():+n)+(e==null?0:+e),!this._next&&lt!==this&&(lt?lt._next=this:Vt=this,lt=this),this._call=t,this._time=n,gn()},stop:function(){this._call&&(this._call=null,this._time=1/0,gn())}};function Ni(t,e,n){var r=new Wt;return r.restart(t,e,n),r}function Ka(){Sn(),++tt;for(var t=Vt,e;t;)(e=je-t._time)>=0&&t._call.call(void 0,e),t=t._next;--tt}function tr(){je=(Ft=mt.now())+Ht,tt=at=0;try{Ka()}finally{tt=0,Qa(),je=0}}function Za(){var t=mt.now(),e=t-Ft;e>ki&&(Ht-=e,Ft=t)}function Qa(){for(var t,e=Vt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Vt=n);lt=t,gn(r)}function gn(t){if(!tt){at&&(at=clearTimeout(at));var e=t-je;e>24?(t<1/0&&(at=setTimeout(tr,t-mt.now()-Ht)),ot&&(ot=clearInterval(ot))):(ot||(Ft=mt.now(),ot=setInterval(Za,ki)),tt=1,Mi(tr))}}function nr(t,e,n){var r=new Wt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Ja=Mn("start","end","cancel","interrupt"),el=[],Ci=0,rr=1,mn=2,Lt=3,ir=4,wn=5,It=6;function qt(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;tl(t,n,{name:e,index:r,group:i,on:Ja,tween:el,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ci})}function On(t,e){var n=be(t,e);if(n.state>Ci)throw new Error("too late; already scheduled");return n}function Me(t,e){var n=be(t,e);if(n.state>Lt)throw new Error("too late; already running");return n}function be(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function tl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ni(o,0,n.time);function o(h){n.state=rr,n.timer.restart(s,n.delay,n.time),n.delay<=h&&s(h-n.delay)}function s(h){var u,c,f,d;if(n.state!==rr)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Lt)return nr(s);d.state===ir?(d.state=It,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=It,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(nr(function(){n.state===Lt&&(n.state=ir,n.timer.restart(a,n.delay,n.time),a(h))}),n.state=mn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===mn){for(n.state=Lt,i=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=d);i.length=c+1}}function a(h){for(var u=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(l),n.state=wn,1),c=-1,f=i.length;++c<f;)i[c].call(t,u);n.state===wn&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=It,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function nl(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>mn&&r.state<wn,r.state=It,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function rl(t){return this.each(function(){nl(this,t)})}function il(t,e){var n,r;return function(){var i=Me(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ol(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Me(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,h=i.length;l<h;++l)if(i[l].name===e){i[l]=a;break}l===h&&i.push(a)}o.tween=i}}function sl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=be(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?il:ol)(n,t,e))}function Pn(t,e,n){var r=t._id;return t.each(function(){var i=Me(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return be(i,r).value[e]}}function Ti(t,e){var n;return(typeof e=="number"?Le:e instanceof gt?Jn:(n=gt(e))?(e=n,Jn):ja)(t,e)}function al(t){return function(){this.removeAttribute(t)}}function ll(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ul(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function hl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function cl(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function fl(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function dl(t,e){var n=Yt(t),r=n==="transform"?Xa:Ti;return this.attrTween(t,typeof e=="function"?(n.local?fl:cl)(n,r,Pn(this,"attr."+t,e)):e==null?(n.local?ll:al)(n):(n.local?hl:ul)(n,r,e))}function pl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function gl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ml(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&gl(t,o)),n}return i._value=e,i}function wl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&pl(t,o)),n}return i._value=e,i}function _l(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Yt(t);return this.tween(n,(r.local?ml:wl)(r,e))}function yl(t,e){return function(){On(this,t).delay=+e.apply(this,arguments)}}function bl(t,e){return e=+e,function(){On(this,t).delay=e}}function vl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yl:bl)(e,t)):be(this.node(),e).delay}function xl(t,e){return function(){Me(this,t).duration=+e.apply(this,arguments)}}function El(t,e){return e=+e,function(){Me(this,t).duration=e}}function kl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xl:El)(e,t)):be(this.node(),e).duration}function Ml(t,e){if(typeof e!="function")throw new Error;return function(){Me(this,t).ease=e}}function Nl(t){var e=this._id;return arguments.length?this.each(Ml(e,t)):be(this.node(),e).ease}function Cl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Me(this,t).ease=n}}function Tl(t){if(typeof t!="function")throw new Error;return this.each(Cl(this._id,t))}function Sl(t){typeof t!="function"&&(t=li(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,h=0;h<s;++h)(l=o[h])&&t.call(l,l.__data__,h,o)&&a.push(l);return new Se(r,this._parents,this._name,this._id)}function Ol(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],h=n[a],u=l.length,c=s[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||h[d])&&(c[d]=f);for(;a<r;++a)s[a]=e[a];return new Se(s,this._parents,this._name,this._id)}function Pl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ll(t,e,n){var r,i,o=Pl(e)?On:Me;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Il(t,e){var n=this._id;return arguments.length<2?be(this.node(),n).on.on(t):this.each(Ll(n,t,e))}function Al(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Rl(){return this.on("end.remove",Al(this._id))}function Dl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,h=o[s]=new Array(l),u,c,f=0;f<l;++f)(u=a[f])&&(c=t.call(u,u.__data__,f,a))&&("__data__"in u&&(c.__data__=u.__data__),h[f]=c,qt(h[f],e,n,f,h,be(u,n)));return new Se(o,this._parents,e,n)}function Bl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ai(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],h=l.length,u,c=0;c<h;++c)if(u=l[c]){for(var f=t.call(u,u.__data__,c,l),d,g=be(u,n),y=0,T=f.length;y<T;++y)(d=f[y])&&qt(d,e,n,y,f,g);o.push(f),s.push(u)}return new Se(o,s,e,n)}var $l=yt.prototype.constructor;function Vl(){return new $l(this._groups,this._parents)}function Fl(t,e){var n,r,i;return function(){var o=et(this,t),s=(this.style.removeProperty(t),et(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Si(t){return function(){this.style.removeProperty(t)}}function Wl(t,e,n){var r,i=n+"",o;return function(){var s=et(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function zl(t,e,n){var r,i,o;return function(){var s=et(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),et(this,t))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function Gl(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var l=Me(this,t),h=l.on,u=l.value[o]==null?a||(a=Si(e)):void 0;(h!==n||i!==u)&&(r=(n=h).copy()).on(s,i=u),l.on=r}}function jl(t,e,n){var r=(t+="")=="transform"?qa:Ti;return e==null?this.styleTween(t,Fl(t,r)).on("end.style."+t,Si(t)):typeof e=="function"?this.styleTween(t,zl(t,r,Pn(this,"style."+t,e))).each(Gl(this._id,t)):this.styleTween(t,Wl(t,r,e),n).on("end.style."+t,null)}function Yl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Hl(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Yl(t,s,n)),r}return o._value=e,o}function ql(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hl(t,e,n??""))}function Xl(t){return function(){this.textContent=t}}function Ul(t){return function(){var e=t(this);this.textContent=e??""}}function Kl(t){return this.tween("text",typeof t=="function"?Ul(Pn(this,"text",t)):Xl(t==null?"":t+""))}function Zl(t){return function(e){this.textContent=t.call(this,e)}}function Ql(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Zl(i)),e}return r._value=t,r}function Jl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ql(t))}function eu(){for(var t=this._name,e=this._id,n=Oi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,h=0;h<a;++h)if(l=s[h]){var u=be(l,e);qt(l,t,n,h,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Se(r,this._parents,t,n)}function tu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var h=Me(this,r),u=h.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),h.on=e}),i===0&&o()})}var nu=0;function Se(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Oi(){return++nu}var Ne=yt.prototype;Se.prototype={constructor:Se,select:Dl,selectAll:Bl,selectChild:Ne.selectChild,selectChildren:Ne.selectChildren,filter:Sl,merge:Ol,selection:Vl,transition:eu,call:Ne.call,nodes:Ne.nodes,node:Ne.node,size:Ne.size,empty:Ne.empty,each:Ne.each,on:Il,attr:dl,attrTween:_l,style:jl,styleTween:ql,text:Kl,textTween:Jl,remove:Rl,tween:sl,delay:vl,duration:kl,ease:Nl,easeVarying:Tl,end:tu,[Symbol.iterator]:Ne[Symbol.iterator]};function ru(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var iu={time:null,delay:0,duration:250,ease:ru};function ou(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function su(t){var e,n;t instanceof Se?(e=t._id,t=t._name):(e=Oi(),(n=iu).time=Sn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,h=0;h<a;++h)(l=s[h])&&qt(l,t,e,h,s,n||ou(l,e));return new Se(r,this._parents,t,e)}yt.prototype.interrupt=rl;yt.prototype.transition=su;const _n=Math.PI,yn=2*_n,We=1e-6,au=yn-We;function Pi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function lu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Pi;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Li{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Pi:lu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,h=i-n,u=s-e,c=a-n,f=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>We)if(!(Math.abs(c*l-h*u)>We)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-s,g=i-a,y=l*l+h*h,T=d*d+g*g,S=Math.sqrt(y),b=Math.sqrt(f),w=o*Math.tan((_n-Math.acos((y+f-T)/(2*S*b)))/2),m=w/b,_=w/S;Math.abs(m-1)>We&&this._append`L${e+m*u},${n+m*c}`,this._append`A${o},${o},0,0,${+(c*d>u*g)},${this._x1=e+_*l},${this._y1=n+_*h}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),h=e+a,u=n+l,c=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${h},${u}`:(Math.abs(this._x1-h)>We||Math.abs(this._y1-u)>We)&&this._append`L${h},${u}`,r&&(f<0&&(f=f%yn+yn),f>au?this._append`A${r},${r},0,1,${c},${e-a},${n-l}A${r},${r},0,1,${c},${this._x1=h},${this._y1=u}`:f>We&&this._append`A${r},${r},0,${+(f>=_n)},${c},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ii(){return new Li}Ii.prototype=Li.prototype;function ut(t,e,n){this.k=t,this.x=e,this.y=n}ut.prototype={constructor:ut,scale:function(t){return t===1?this:new ut(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ut(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ut.prototype;class bn{context=Ii();x0=NaN;x1=NaN;y0=NaN;y1=NaN;state=0;constructor(e){for(let n=0;n<e.length;n++){const r=e[n];if(this.point(r.x,r.y),n===e.length-1)switch(this.state){case 3:this.curve(this.x1,this.y1),this.context.lineTo(this.x1,this.y1);break;case 2:this.context.lineTo(this.x1,this.y1);break}}}point(e,n){switch(e=+e,n=+n,this.state){case 0:this.state=1,this.context.moveTo(e,n);break;case 1:this.state=2;break;case 2:this.state=3,this.context.lineTo((5*this.x0+this.x1)/6,(5*this.y0+this.y1)/6),this.curve(e,n);break;default:this.curve(e,n);break}this.x0=this.x1,this.x1=e,this.y0=this.y1,this.y1=n}curve(e,n){this.context.bezierCurveTo((2*this.x0+this.x1)/3,(2*this.y0+this.y1)/3,(this.x0+2*this.x1)/3,(this.y0+2*this.y1)/3,(this.x0+4*this.x1+e)/6,(this.y0+4*this.y1+n)/6)}build(){return this.context.toString()}}class q{constructor(e,n,r,i){this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.xMin=e,this.xMax=r,this.yMin=n,this.yMax=i}static infinity(){return new q(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE)}isEmpty(){return this.xMin===Number.MAX_VALUE||this.yMin===Number.MAX_VALUE||this.xMax===Number.MIN_VALUE||this.yMax===Number.MIN_VALUE}static fromCenterAndDimension(e,n,r){return new q(e.x-n/2,e.y-r/2,e.x+n/2,e.y+r/2)}static fromPoints(...e){return e.reduce((n,r)=>(n.xMin=Math.min(n.xMin,r.x),n.yMin=Math.min(n.yMin,r.y),n.xMax=Math.max(n.xMax,r.x),n.yMax=Math.max(n.yMax,r.y),n),q.infinity())}static fromUnion(...e){return e.reduce((n,r)=>n.union(r),q.infinity())}get width(){return this.xMax-this.xMin}get height(){return this.yMax-this.yMin}get center(){return{x:this.xMin+this.width/2,y:this.yMin+this.height/2}}padded(e){const{l:n,r,b:i,t:o}=typeof e=="object"?e:{l:e,r:e,t:e,b:e};return new q(this.xMin-n,this.yMin-o,this.xMax+r,this.yMax+i)}union(e){return new q(Math.min(this.xMin,e.xMin),Math.min(this.yMin,e.yMin),Math.max(this.xMax,e.xMax),Math.max(this.yMax,e.yMax))}transformed(e){const n=e.apply(this.xMin,this.yMin),r=e.apply(this.xMax,this.yMax);return new q(n.x,n.y,r.x,r.y)}contains(e,n){return this.xMin<=e&&this.yMin<=n&&e<=this.xMax&&n<=this.yMax}encloses(e){return this.contains(e.xMin,e.yMin)&&this.contains(e.xMax,e.yMax)}intersects(e){return this.xMin<=e.xMin&&e.xMin<=this.xMax||this.xMin<=e.xMax&&e.xMax<=this.xMax||this.yMin<=e.yMin&&e.yMin<=this.yMax||this.yMin<=e.yMax&&e.yMax<=this.yMax}}function*uu(t,e){let n=!0;for(const r of t)n||(yield e),n=!1,yield r}function At(t,e,n){return Math.min(Math.max(n,t),e)}class De{options;constructor(e){this.options=e}with(e){return this.options={...this.options,...e},this}}function or(t,e,n){const r=t.slice();return r[3]=e[n],r}function sr(t){let e,n,r,i;const o=[{self:t[3]}];var s=t[3].drawable();function a(l,h){let u={};for(let c=0;c<o.length;c+=1)u=Ie(u,o[c]);return h!==void 0&&h&1&&(u=Ie(u,Je(o,[{self:l[3]}]))),{props:u}}return s&&(n=Qe(s,a(t))),{c(){e=G(),n&&Z(n.$$.fragment),r=G()},l(l){e=G(),n&&oe(n.$$.fragment,l),r=G()},m(l,h){I(l,e,h),n&&Q(n,l,h),I(l,r,h),i=!0},p(l,h){if(h&1&&s!==(s=l[3].drawable())){if(n){ce();const u=n;D(u.$$.fragment,1,0,()=>{J(u,1)}),fe()}s?(n=Qe(s,a(l,h)),Z(n.$$.fragment),P(n.$$.fragment,1),Q(n,r.parentNode,r)):n=null}else if(s){const u=h&1?Je(o,[{self:l[3]}]):{};n.$set(u)}},i(l){i||(n&&P(n.$$.fragment,l),i=!0)},o(l){n&&D(n.$$.fragment,l),i=!1},d(l){l&&(E(e),E(r)),n&&J(n,l)}}}function hu(t){let e,n,r;const i=t[2].default,o=Ur(i,t,t[1],null);let s=ge(t[0].children),a=[];for(let h=0;h<s.length;h+=1)a[h]=sr(or(t,s,h));const l=h=>D(a[h],1,1,()=>{a[h]=null});return{c(){e=V("g"),o&&o.c();for(let h=0;h<a.length;h+=1)a[h].c();this.h()},l(h){e=F(h,"g",{transform:!0});var u=L(e);o&&o.l(u);for(let c=0;c<a.length;c+=1)a[c].l(u);u.forEach(E),this.h()},h(){p(e,"transform",n=t[0].transform.toString())},m(h,u){I(h,e,u),o&&o.m(e,null);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);r=!0},p(h,[u]){if(o&&o.p&&(!r||u&2)&&Kr(o,i,h,h[1],r?Qr(i,h[1],u,null):Zr(h[1]),null),u&1){s=ge(h[0].children);let c;for(c=0;c<s.length;c+=1){const f=or(h,s,c);a[c]?(a[c].p(f,u),P(a[c],1)):(a[c]=sr(f),a[c].c(),P(a[c],1),a[c].m(e,null))}for(ce(),c=s.length;c<a.length;c+=1)l(c);fe()}(!r||u&1&&n!==(n=h[0].transform.toString()))&&p(e,"transform",n)},i(h){if(!r){P(o,h);for(let u=0;u<s.length;u+=1)P(a[u]);r=!0}},o(h){D(o,h),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)D(a[u]);r=!1},d(h){h&&E(e),o&&o.d(h),Jr(a,h)}}}function cu(t,e,n){let{$$slots:r={},$$scope:i}=e,{self:o}=e;return t.$$set=s=>{"self"in s&&n(0,o=s.self),"$$scope"in s&&n(1,i=s.$$scope)},[o,i,r]}let Ln=class extends ae{constructor(e){super(),le(this,e,cu,hu,se,{self:0})}};class fu{onClick}class it extends fu{transform;constructor(){super(),this.transform=un.identity()}moveTo(e,n){this.transform.x=e,this.transform.y=n}}class Xt extends it{children;constructor(...e){super(),this.children=e}boundingBox(){return q.fromUnion(...this.children.map(e=>e.boundingBox().transformed(e.transform)))}drawable(){return Ln}}class du extends De{children;constructor(...e){super({spacing:0,spread:!1,minWidth:Number.MIN_VALUE,maxWidth:Number.MAX_VALUE}),this.children=e}build(e={}){const n=this.children.map(o=>o.build(e));let r=0;if(this.options.spread&&e.targetWidth!==void 0){const o=n.length-1,s=n.reduce((l,h)=>l+h.boundingBox().width,this.options.spacing*o),a=e.targetWidth-s;r=Math.max(a/(this.children.length-1),0)}const i={x:0,y:0};for(const o of n)o.moveTo(i.x,i.y),i.x+=o.boundingBox().width+this.options.spacing+r;return new Ai(this.options,...n)}}class pu extends De{children;constructor(...e){super({spacing:0,spread:!1,minWidth:Number.MIN_VALUE,maxWidth:Number.MAX_VALUE}),this.children=e}padded(e){return new vt(this,e)}build(e={}){const n=Math.max(this.options.minWidth,this.children.reduce((o,s)=>Math.max(o,s.build(e).boundingBox().width),-1/0)),r=this.children.map(o=>o.build({...e,targetWidth:n})),i={x:0,y:0};for(const o of r)o.moveTo(i.x,i.y),i.y+=o.boundingBox().height+this.options.spacing;return new Ai(this.options,...r)}}class Ai extends Xt{constructor(e,...n){super(...n),this.options=e,this.options=e}boundingBox(){const e=super.boundingBox();return e.xMax=At(this.options.minWidth,this.options.maxWidth,e.xMax),e}}const Ri={l:8,r:8,t:10,b:10};function gu(t,e,n,r){switch(n){case"topRight":return{x:t.xMax+r,y:t.yMin};case"bottomMiddle":return{x:t.center.x-e.width/2,y:t.yMax+r}}}let Ip=class extends De{content;constructor(e){super({anchor:"topRight"}),this.content=e}build(e={}){return new mu(new wu(new vt(this.content,Ri)).with({radius:6,borderColor:"none",backgroundColor:ye.background.darkGray}).build({defaultOptions:{text:{foregroundColor:"white"}}}),this.options)}};class mu extends it{constructor(e,n){super(),this.content=e,this.options=n}boundingBox(){return this.content.boundingBox().padded(Ri)}drawable(){throw Error("not implemented")}}class wu extends De{constructor(e){super({backgroundColor:ye.white,borderColor:ye.foreground.grayTertiary,borderWidth:1,borderDash:void 0,radius:void 0}),this.inner=e}content(){return this.inner}build(e={}){const n=this.inner.build(e),r=n.boundingBox();return new _u(n,new Bi(r.width,r.height).with(this.options).build(e))}}class _u extends Xt{constructor(e,n){super(n,e)}boundingBox(){return super.boundingBox()}}function yu(t){let e,n;return{c(){e=V("path"),this.h()},l(r){e=F(r,"path",{stroke:!0,"stroke-width":!0,fill:!0,"pointer-events":!0,"marker-end":!0,d:!0}),L(e).forEach(E),this.h()},h(){p(e,"stroke",ye.foreground.grayTertiary),p(e,"stroke-width","1"),p(e,"fill","none"),p(e,"pointer-events","none"),p(e,"marker-end","url(#arrowhead)"),p(e,"d",n=new bn(t[0]).build())},m(r,i){I(r,e,i)},p(r,[i]){i&1&&n!==(n=new bn(r[0]).build())&&p(e,"d",n)},i:Y,o:Y,d(r){r&&E(e)}}}function bu(t,e,n){let r,{self:i}=e;return t.$$set=o=>{"self"in o&&n(1,i=o.self)},t.$$.update=()=>{t.$$.dirty&2&&n(0,r=i.points.map(o=>i.transform.apply(o.x,o.y)))},[r,i]}class vu extends ae{constructor(e){super(),le(this,e,bu,yu,se,{self:1})}}class xu extends it{points;constructor(e){super(),this.points=e}path(){const e=this.points.map(n=>this.transform.apply(n.x,n.y));return new bn(e).build()}boundingBox(){return q.fromPoints(...this.points)}drawable(){return vu}}class Eu extends Xt{}function ku(t){let e,n,r=t[0].text+"",i,o,s;return{c(){e=Ce(),n=V("text"),i=Ae(r),this.h()},l(a){e=Te(a),n=F(a,"text",{x:!0,y:!0,"dominant-baseline":!0,"font-family":!0,"font-size":!0,fill:!0,"font-weight":!0});var l=L(n);i=Re(l,r),l.forEach(E),this.h()},h(){p(n,"x",o=t[0].transform.x),p(n,"y",s=t[0].transform.y),p(n,"dominant-baseline","hanging"),p(n,"font-family",t[2]),p(n,"font-size",t[1]),p(n,"fill",t[3]),p(n,"font-weight",t[4])},m(a,l){I(a,e,l),I(a,n,l),B(n,i)},p(a,[l]){l&1&&r!==(r=a[0].text+"")&&_t(i,r),l&1&&o!==(o=a[0].transform.x)&&p(n,"x",o),l&1&&s!==(s=a[0].transform.y)&&p(n,"y",s)},i:Y,o:Y,d(a){a&&(E(e),E(n))}}}function Mu(t,e,n){let{self:r}=e;const{fontSize:i,font:o,foregroundColor:s,fontWeight:a}=r.options;return t.$$set=l=>{"self"in l&&n(0,r=l.self)},[r,i,o,s,a]}let Nu=class extends ae{constructor(e){super(),le(this,e,Mu,ku,se,{self:0})}};class Cu{canvas;ctx;constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}measureTextWidth(e,n){return this.ctx.font=`${n.fontSize}px ${n.font}`,this.ctx.textBaseline="top",this.ctx.measureText(e).width}}class Tu extends De{text;constructor(e){super({font:jt.family,fontSize:16,fontWeight:200}),this.text=e}padded(e){return new vt(this,e)}build(e){return new Su(this.text,{...e?.defaultOptions?.text,...this.options})}}class Su extends it{text;options;width;height;constructor(e,n){super(),this.text=e,this.options=n,this.width=new Cu().measureTextWidth(this.text,this.options),this.height=n.fontSize}boundingBox(){return new q(0,0,this.width,this.height)}drawable(){return Nu}}const In=Symbol();function Ou(t){let e,n,r;return{c(){e=V("rect"),this.h()},l(i){e=F(i,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),L(e).forEach(E),this.h()},h(){p(e,"x",n=t[0].transform.x),p(e,"y",r=t[0].transform.y),p(e,"width",t[6]),p(e,"height",t[7]),p(e,"rx",t[1]),p(e,"fill",t[4]),p(e,"stroke",t[5]),p(e,"stroke-width",t[3]),p(e,"stroke-dasharray",t[2])},m(i,o){I(i,e,o)},p(i,[o]){o&1&&n!==(n=i[0].transform.x)&&p(e,"x",n),o&1&&r!==(r=i[0].transform.y)&&p(e,"y",r),o&2&&p(e,"rx",i[1]),o&16&&p(e,"fill",i[4]),o&32&&p(e,"stroke",i[5]),o&8&&p(e,"stroke-width",i[3]),o&4&&p(e,"stroke-dasharray",i[2])},i:Y,o:Y,d(i){i&&E(e)}}}function Pu(t,e,n){let r,i,o,s,a,{self:l}=e;const h=l.boundingBox().width,u=l.boundingBox().height;return t.$$set=c=>{"self"in c&&n(0,l=c.self)},t.$$.update=()=>{t.$$.dirty&1&&n(5,{borderColor:r,backgroundColor:i,borderWidth:o,borderDash:s,radius:a}=l.options,r,(n(4,i),n(0,l)),(n(3,o),n(0,l)),(n(2,s),n(0,l)),(n(1,a),n(0,l)))},[l,a,s,o,i,r,h,u]}let Di=class extends ae{constructor(e){super(),le(this,e,Pu,Ou,se,{self:0})}};function ar(t){let e,n,r,i,o=t[2].text&&lr(t);return{c(){e=V("g"),n=V("circle"),o&&o.c(),this.h()},l(s){e=F(s,"g",{class:!0,transform:!0});var a=L(e);n=F(a,"circle",{r:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(n).forEach(E),o&&o.l(a),a.forEach(E),this.h()},h(){p(n,"r","10"),p(n,"fill",r=t[2].color),p(n,"stroke","white"),p(n,"stroke-width","2"),p(e,"class","badge"),p(e,"transform",i=`translate(${t[3].width+t[5].x},${-t[5].y})`)},m(s,a){I(s,e,a),B(e,n),o&&o.m(e,null)},p(s,a){a&4&&r!==(r=s[2].color)&&p(n,"fill",r),s[2].text?o?o.p(s,a):(o=lr(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null),a&8&&i!==(i=`translate(${s[3].width+s[5].x},${-s[5].y})`)&&p(e,"transform",i)},d(s){s&&E(e),o&&o.d()}}}function lr(t){let e,n=t[2].text+"",r;return{c(){e=V("text"),r=Ae(n),this.h()},l(i){e=F(i,"text",{y:!0,"font-family":!0,"font-size":!0,"text-anchor":!0,"dominant-baseline":!0,fill:!0});var o=L(e);r=Re(o,n),o.forEach(E),this.h()},h(){p(e,"y",1),p(e,"font-family",jt.family),p(e,"font-size","10"),p(e,"text-anchor","middle"),p(e,"dominant-baseline","middle"),p(e,"fill","white")},m(i,o){I(i,e,o),B(e,r)},p(i,o){o&4&&n!==(n=i[2].text+"")&&_t(r,n)},d(i){i&&E(e)}}}function Lu(t){let e,n,r,i,o,s,a,l;n=new Di({props:{self:t[1]}});const h=[{self:t[0].content}];var u=t[0].content.drawable();function c(d,g){let y={};for(let T=0;T<h.length;T+=1)y=Ie(y,h[T]);return g!==void 0&&g&1&&(y=Ie(y,Je(h,[{self:d[0].content}]))),{props:y}}u&&(r=Qe(u,c(t)));let f=t[2]&&ar(t);return{c(){e=V("g"),Z(n.$$.fragment),r&&Z(r.$$.fragment),i=Ae(` -->
  `),f&&f.c(),this.h()},l(d){e=F(d,"g",{transform:!0,cursor:!0});var g=L(e);oe(n.$$.fragment,g),r&&oe(r.$$.fragment,g),i=Re(g,` -->
  `),f&&f.l(g),g.forEach(E),this.h()},h(){p(e,"transform",o=`translate(${t[3].xMin},${t[3].yMin})`),p(e,"cursor","pointer")},m(d,g){I(d,e,g),Q(n,e,null),r&&Q(r,e,null),B(e,i),f&&f.m(e,null),s=!0,a||(l=[H(e,"click",t[13]),H(e,"dblclick",t[14]),H(e,"mouseenter",t[6]),H(e,"mouseleave",t[7])],a=!0)},p(d,[g]){const y={};if(g&2&&(y.self=d[1]),n.$set(y),g&1&&u!==(u=d[0].content.drawable())){if(r){ce();const T=r;D(T.$$.fragment,1,0,()=>{J(T,1)}),fe()}u?(r=Qe(u,c(d,g)),Z(r.$$.fragment),P(r.$$.fragment,1),Q(r,e,i)):r=null}else if(u){const T=g&1?Je(h,[{self:d[0].content}]):{};r.$set(T)}d[2]?f?f.p(d,g):(f=ar(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!s||g&8&&o!==(o=`translate(${d[3].xMin},${d[3].yMin})`))&&p(e,"transform",o)},i(d){s||(P(n.$$.fragment,d),r&&P(r.$$.fragment,d),s=!0)},o(d){D(n.$$.fragment,d),r&&D(r.$$.fragment,d),s=!1},d(d){d&&E(e),J(n),r&&J(r),f&&f.d(),a=!1,Gt(l)}}}function Iu(t,e,n){let r,i,o,s,a,l;const h=nt();let{self:u}=e,{decoration:c}=e;const{selections:f}=ei(In);ti(t,f,w=>n(12,l=w));const d={x:1,y:1};let g=!1;function y(w){n(9,g=!0),h("nodeEnter",{...w,nodeId:r})}function T(w){n(9,g=!1),h("nodeLeave",{...w,nodeId:r})}function S(w){ue.call(this,t,w)}function b(w){ue.call(this,t,w)}return t.$$set=w=>{"self"in w&&n(0,u=w.self),"decoration"in w&&n(8,c=w.decoration)},t.$$.update=()=>{t.$$.dirty&1&&n(11,r=u.nodeId),t.$$.dirty&6144&&n(10,i=l.has(r)),t.$$.dirty&1&&n(3,o=u.boundingBox()),t.$$.dirty&1&&n(2,s=u.options.badge),t.$$.dirty&1793&&n(1,a=new Bi(u.content.boundingBox().width,u.content.boundingBox().height).with({borderColor:ye.foreground.grayTertiary,borderWidth:1,radius:6,borderDash:u.options.borderDash,backgroundColor:u.options.backgroundColor}).with({...c}).with(g?{borderColor:ye.foreground.blue}:{}).with(i?{borderColor:ye.foreground.blue,borderWidth:3}:{}).build())},[u,a,s,o,f,d,y,T,c,g,i,r,l,S,b]}let An=class extends ae{constructor(e){super(),le(this,e,Iu,Lu,se,{self:0,decoration:8})}};function Au(t){return new du(new Tu(t)).with({minWidth:30})}class $p extends De{constructor(e,...n){super({selectable:!1,borderDash:void 0,badge:void 0,tooltip:void 0,backgroundColor:ye.white,borderColor:ye.foreground.grayTertiary,humanReadable:void 0,padding:{l:8,r:8,t:10,b:10}}),this.nodeId=e,this.contents=n.length>0?n:[Au(this.options.humanReadable||this.nodeId)]}contents;humanReadable(){return this.options.humanReadable}build(e={}){const n=[...uu(this.contents.map(r=>new vt(r,this.options.padding)),new Fu().with({color:this.options.borderColor,dash:this.options.borderDash}))];return new Ru(this.nodeId,new pu(...n).build(e),this.options)}}class Ru extends it{constructor(e,n,r){super(),this.nodeId=e,this.content=n,this.options=r}boundingBox(){return this.content.boundingBox().transformed(this.transform)}drawable(){return An}}class Bi extends De{width;height;constructor(e,n){super({backgroundColor:ye.black,borderColor:"none",borderWidth:0,borderDash:void 0,radius:void 0}),this.width=e,this.height=n}padded(e){return new vt(this,e)}build(e={}){return new $i(this.width,this.height,this.options)}}class $i extends it{constructor(e,n,r){super(),this.width=e,this.height=n,this.options=r}boundingBox(){return new q(0,0,this.width,this.height)}drawable(){return Di}}function Du(t){return t.l!==void 0}class vt{constructor(e,n){this.inner=e,this.inner=e,this.p=Du(n)?n:{l:n,r:n,t:n,b:n}}p;content(){return this.inner}padding(){return this.p}build(e={}){const{l:n,t:r,r:i}=this.p,o=e.targetWidth?this.inner.build({...e,targetWidth:e.targetWidth-n-i}):this.inner.build({...e});return o.moveTo(n,r),new Bu(o,this.p)}}class Bu extends Xt{padding;constructor(e,n){super(e),this.padding=n}boundingBox(){return super.boundingBox().padded(this.padding)}drawable(){return Ln}}const $u=1,Vu=100;class Fu extends De{width;constructor(e){super({color:ye.foreground.grayTertiary,dash:void 0}),this.width=e}build(e={}){const n=this.width||e.targetWidth||Vu;return new $i(n,$u,{backgroundColor:this.options.color,borderColor:"none",borderWidth:0,radius:void 0,borderDash:this.options.dash})}}var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zu="\0",Fe="\0",ur="";let Gu=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=e.hasOwnProperty("directed")?e.directed:!0,this._isMultigraph=e.hasOwnProperty("multigraph")?e.multigraph:!1,this._isCompound=e.hasOwnProperty("compound")?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[Fe]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!="function"&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(n=>Object.keys(e._in[n]).length===0)}sinks(){var e=this;return this.nodes().filter(n=>Object.keys(e._out[n]).length===0)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(o){r.length>1?i.setNode(o,n):i.setNode(o)}),this}setNode(e,n){return this._nodes.hasOwnProperty(e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=Fe,this._children[e]={},this._children[Fe][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var n=this;if(this._nodes.hasOwnProperty(e)){var r=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(i){n.setParent(i)}),delete this._children[e]),Object.keys(this._in[e]).forEach(r),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=Fe;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if(n!==Fe)return n}}children(e=Fe){if(this._isCompound){var n=this._children[e];if(n)return Object.keys(n)}else{if(e===Fe)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=this._preds[e];if(n)return Object.keys(n)}successors(e){var n=this._sucs[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){const i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([s,a]){e(s)&&n.setNode(s,a)}),Object.values(this._edgeObjs).forEach(function(s){n.hasNode(s.v)&&n.hasNode(s.w)&&n.setEdge(s,r.edge(s))});var i={};function o(s){var a=r.parent(s);return a===void 0||n.hasNode(a)?(i[s]=a,a):a in i?i[a]:o(a)}return this._isCompound&&n.nodes().forEach(s=>n.setParent(s,o(s))),n}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!="function"&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,n){var r=this,i=arguments;return e.reduce(function(o,s){return i.length>1?r.setEdge(o,s,n):r.setEdge(o,s),s}),this}setEdge(){var e,n,r,i,o=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,n=s.w,r=s.name,arguments.length===2&&(i=arguments[1],o=!0)):(e=s,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,n=""+n,r!==void 0&&(r=""+r);var a=ht(this._isDirected,e,n,r);if(this._edgeLabels.hasOwnProperty(a))return o&&(this._edgeLabels[a]=i),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[a]=o?i:this._defaultEdgeLabelFn(e,n,r);var l=ju(this._isDirected,e,n,r);return e=l.v,n=l.w,Object.freeze(l),this._edgeObjs[a]=l,hr(this._preds[n],e),hr(this._sucs[e],n),this._in[n][a]=l,this._out[e][a]=l,this._edgeCount++,this}edge(e,n,r){var i=arguments.length===1?tn(this._isDirected,arguments[0]):ht(this._isDirected,e,n,r);return this._edgeLabels[i]}edgeAsObj(){const e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,n,r){var i=arguments.length===1?tn(this._isDirected,arguments[0]):ht(this._isDirected,e,n,r);return this._edgeLabels.hasOwnProperty(i)}removeEdge(e,n,r){var i=arguments.length===1?tn(this._isDirected,arguments[0]):ht(this._isDirected,e,n,r),o=this._edgeObjs[i];return o&&(e=o.v,n=o.w,delete this._edgeLabels[i],delete this._edgeObjs[i],cr(this._preds[n],e),cr(this._sucs[e],n),delete this._in[n][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,n){var r=this._in[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.v===n):i}}outEdges(e,n){var r=this._out[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}};function hr(t,e){t[e]?t[e]++:t[e]=1}function cr(t,e){--t[e]||delete t[e]}function ht(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}return i+ur+o+ur+(r===void 0?zu:r)}function ju(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function tn(t,e){return ht(t,e.v,e.w,e.name)}var Rn=Gu,Yu="2.2.2",Hu={Graph:Rn,version:Yu},qu=Rn,Xu={write:Uu,read:Qu};function Uu(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Ku(t),edges:Zu(t)};return t.graph()!==void 0&&(e.value=structuredClone(t.graph())),e}function Ku(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function Zu(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return e.name!==void 0&&(r.name=e.name),n!==void 0&&(r.value=n),r})}function Qu(t){var e=new qu(t.options).setGraph(t.value);return t.nodes.forEach(function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),t.edges.forEach(function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var Ju=eh;function eh(t){var e={},n=[],r;function i(o){e.hasOwnProperty(o)||(e[o]=!0,r.push(o),t.successors(o).forEach(i),t.predecessors(o).forEach(i))}return t.nodes().forEach(function(o){r=[],i(o),r.length&&n.push(r)}),n}let th=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var n=this._keyIndices[e];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(e,n){var r=this._keyIndices;if(e=String(e),!r.hasOwnProperty(e)){var i=this._arr,o=i.length;return r[e]=o,i.push({key:e,priority:n}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,n){var r=this._keyIndices[e];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(e){var n=this._arr,r=2*e,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(this._swap(e,o),this._heapify(o)))}_decrease(e){for(var n=this._arr,r=n[e].priority,i;e!==0&&(i=e>>1,!(n[i].priority<r));)this._swap(e,i),e=i}_swap(e,n){var r=this._arr,i=this._keyIndices,o=r[e],s=r[n];r[e]=s,r[n]=o,i[s.key]=e,i[o.key]=n}};var Vi=th,nh=Vi,Fi=ih,rh=()=>1;function ih(t,e,n,r){return oh(t,String(e),n||rh,r||function(i){return t.outEdges(i)})}function oh(t,e,n,r){var i={},o=new nh,s,a,l=function(h){var u=h.v!==s?h.v:h.w,c=i[u],f=n(h),d=a.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+f);d<c.distance&&(c.distance=d,c.predecessor=s,o.decrease(u,d))};for(t.nodes().forEach(function(h){var u=h===e?0:Number.POSITIVE_INFINITY;i[h]={distance:u},o.add(h,u)});o.size()>0&&(s=o.removeMin(),a=i[s],a.distance!==Number.POSITIVE_INFINITY);)r(s).forEach(l);return i}var sh=Fi,ah=lh;function lh(t,e,n){return t.nodes().reduce(function(r,i){return r[i]=sh(t,i,e,n),r},{})}var Wi=uh;function uh(t){var e=0,n=[],r={},i=[];function o(s){var a=r[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(u){r.hasOwnProperty(u)?r[u].onStack&&(a.lowlink=Math.min(a.lowlink,r[u].index)):(o(u),a.lowlink=Math.min(a.lowlink,r[u].lowlink))}),a.lowlink===a.index){var l=[],h;do h=n.pop(),r[h].onStack=!1,l.push(h);while(s!==h);i.push(l)}}return t.nodes().forEach(function(s){r.hasOwnProperty(s)||o(s)}),i}var hh=Wi,ch=fh;function fh(t){return hh(t).filter(function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var dh=gh,ph=()=>1;function gh(t,e,n){return mh(t,e||ph,n||function(r){return t.outEdges(r)})}function mh(t,e,n){var r={},i=t.nodes();return i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(s){o!==s&&(r[o][s]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(s){var a=s.v===o?s.w:s.v,l=e(s);r[o][a]={distance:l,predecessor:o}})}),i.forEach(function(o){var s=r[o];i.forEach(function(a){var l=r[a];i.forEach(function(h){var u=l[o],c=s[h],f=l[h],d=u.distance+c.distance;d<f.distance&&(f.distance=d,f.predecessor=c.predecessor)})})}),r}function zi(t){var e={},n={},r=[];function i(o){if(n.hasOwnProperty(o))throw new vn;e.hasOwnProperty(o)||(n[o]=!0,e[o]=!0,t.predecessors(o).forEach(i),delete n[o],r.push(o))}if(t.sinks().forEach(i),Object.keys(e).length!==t.nodeCount())throw new vn;return r}class vn extends Error{constructor(){super(...arguments)}}var Gi=zi;zi.CycleException=vn;var fr=Gi,wh=_h;function _h(t){try{fr(t)}catch(e){if(e instanceof fr.CycleException)return!1;throw e}return!0}var ji=yh;function yh(t,e,n){Array.isArray(e)||(e=[e]);var r=t.isDirected()?a=>t.successors(a):a=>t.neighbors(a),i=n==="post"?bh:vh,o=[],s={};return e.forEach(a=>{if(!t.hasNode(a))throw new Error("Graph does not have node: "+a);i(a,r,s,o)}),o}function bh(t,e,n,r){for(var i=[[t,!1]];i.length>0;){var o=i.pop();o[1]?r.push(o[0]):n.hasOwnProperty(o[0])||(n[o[0]]=!0,i.push([o[0],!0]),Yi(e(o[0]),s=>i.push([s,!1])))}}function vh(t,e,n,r){for(var i=[t];i.length>0;){var o=i.pop();n.hasOwnProperty(o)||(n[o]=!0,r.push(o),Yi(e(o),s=>i.push(s)))}}function Yi(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}var xh=ji,Eh=kh;function kh(t,e){return xh(t,e,"post")}var Mh=ji,Nh=Ch;function Ch(t,e){return Mh(t,e,"pre")}var Th=Rn,Sh=Vi,Oh=Ph;function Ph(t,e){var n=new Th,r={},i=new Sh,o;function s(l){var h=l.v===o?l.w:l.v,u=i.priority(h);if(u!==void 0){var c=e(l);c<u&&(r[h]=o,i.decrease(h,c))}}if(t.nodeCount()===0)return n;t.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var a=!1;i.size()>0;){if(o=i.removeMin(),r.hasOwnProperty(o))n.setEdge(o,r[o]);else{if(a)throw new Error("Input graph is not connected: "+t);a=!0}t.nodeEdges(o).forEach(s)}return n}var Lh={components:Ju,dijkstra:Fi,dijkstraAll:ah,findCycles:ch,floydWarshall:dh,isAcyclic:wh,postorder:Eh,preorder:Nh,prim:Oh,tarjan:Wi,topsort:Gi},dr=Hu,ve={Graph:dr.Graph,json:Xu,alg:Lh,version:dr.version};let Ih=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,n=e._prev;if(n!==e)return pr(n),n}enqueue(e){let n=this._sentinel;e._prev&&e._next&&pr(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){let e=[],n=this._sentinel,r=n._prev;for(;r!==n;)e.push(JSON.stringify(r,Ah)),r=r._prev;return"["+e.join(", ")+"]"}};function pr(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Ah(t,e){if(t!=="_next"&&t!=="_prev")return e}var Rh=Ih;let Dh=ve.Graph,Bh=Rh;var $h=Fh;let Vh=()=>1;function Fh(t,e){if(t.nodeCount()<=1)return[];let n=zh(t,e||Vh);return Wh(n.graph,n.buckets,n.zeroIdx).flatMap(i=>t.outEdges(i.v,i.w))}function Wh(t,e,n){let r=[],i=e[e.length-1],o=e[0],s;for(;t.nodeCount();){for(;s=o.dequeue();)nn(t,e,n,s);for(;s=i.dequeue();)nn(t,e,n,s);if(t.nodeCount()){for(let a=e.length-2;a>0;--a)if(s=e[a].dequeue(),s){r=r.concat(nn(t,e,n,s,!0));break}}}return r}function nn(t,e,n,r,i){let o=i?[]:void 0;return t.inEdges(r.v).forEach(s=>{let a=t.edge(s),l=t.node(s.v);i&&o.push({v:s.v,w:s.w}),l.out-=a,xn(e,n,l)}),t.outEdges(r.v).forEach(s=>{let a=t.edge(s),l=s.w,h=t.node(l);h.in-=a,xn(e,n,h)}),t.removeNode(r.v),o}function zh(t,e){let n=new Dh,r=0,i=0;t.nodes().forEach(a=>{n.setNode(a,{v:a,in:0,out:0})}),t.edges().forEach(a=>{let l=n.edge(a.v,a.w)||0,h=e(a),u=l+h;n.setEdge(a.v,a.w,u),i=Math.max(i,n.node(a.v).out+=h),r=Math.max(r,n.node(a.w).in+=h)});let o=Gh(i+r+3).map(()=>new Bh),s=r+1;return n.nodes().forEach(a=>{xn(o,s,n.node(a))}),{graph:n,buckets:o,zeroIdx:s}}function xn(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function Gh(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}let Hi=ve.Graph;var ee={addBorderNode:Qh,addDummyNode:qi,asNonCompoundGraph:Yh,buildLayerMatrix:Uh,intersectRect:Xh,mapValues:ic,maxRank:Xi,normalizeRanks:Kh,notime:tc,partition:Jh,pick:rc,predecessorWeights:qh,range:Ki,removeEmptyRanks:Zh,simplify:jh,successorWeights:Hh,time:ec,uniqueId:Ui,zipObject:Dn};function qi(t,e,n,r){let i;do i=Ui(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function jh(t){let e=new Hi().setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{let r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function Yh(t){let e=new Hi({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e}function Hh(t){let e=t.nodes().map(n=>{let r={};return t.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return Dn(t.nodes(),e)}function qh(t){let e=t.nodes().map(n=>{let r={};return t.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return Dn(t.nodes(),e)}function Xh(t,e){let n=t.x,r=t.y,i=e.x-n,o=e.y-r,s=t.width/2,a=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");let l,h;return Math.abs(o)*s>Math.abs(i)*a?(o<0&&(a=-a),l=a*i/o,h=a):(i<0&&(s=-s),l=s,h=s*o/i),{x:n+l,y:r+h}}function Uh(t){let e=Ki(Xi(t)+1).map(()=>[]);return t.nodes().forEach(n=>{let r=t.node(n),i=r.rank;i!==void 0&&(e[i][r.order]=n)}),e}function Kh(t){let e=Math.min(...t.nodes().map(n=>{let r=t.node(n).rank;return r===void 0?Number.MAX_VALUE:r}));t.nodes().forEach(n=>{let r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})}function Zh(t){let e=Math.min(...t.nodes().map(o=>t.node(o).rank)),n=[];t.nodes().forEach(o=>{let s=t.node(o).rank-e;n[s]||(n[s]=[]),n[s].push(o)});let r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((o,s)=>{o===void 0&&s%i!==0?--r:o!==void 0&&r&&o.forEach(a=>t.node(a).rank+=r)})}function Qh(t,e,n,r){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),qi(t,"border",i,e)}function Xi(t){return Math.max(...t.nodes().map(e=>{let n=t.node(e).rank;return n===void 0?Number.MIN_VALUE:n}))}function Jh(t,e){let n={lhs:[],rhs:[]};return t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function ec(t,e){let n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}}function tc(t,e){return e()}let nc=0;function Ui(t){var e=++nc;return toString(t)+e}function Ki(t,e,n=1){e==null&&(e=t,t=0);let r=o=>o<e;n<0&&(r=o=>e<o);const i=[];for(let o=t;r(o);o+=n)i.push(o);return i}function rc(t,e){const n={};for(const r of e)t[r]!==void 0&&(n[r]=t[r]);return n}function ic(t,e){let n=e;return typeof e=="string"&&(n=r=>r[e]),Object.entries(t).reduce((r,[i,o])=>(r[i]=n(o,i),r),{})}function Dn(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let oc=$h,sc=ee.uniqueId;var ac={run:lc,undo:hc};function lc(t){(t.graph().acyclicer==="greedy"?oc(t,n(t)):uc(t)).forEach(r=>{let i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,sc("rev"))});function n(r){return i=>r.edge(i).weight}}function uc(t){let e=[],n={},r={};function i(o){r.hasOwnProperty(o)||(r[o]=!0,n[o]=!0,t.outEdges(o).forEach(s=>{n.hasOwnProperty(s.w)?e.push(s):i(s.w)}),delete n[o])}return t.nodes().forEach(i),e}function hc(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.reversed){t.removeEdge(e);let r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}let cc=ee;var fc={run:dc,undo:gc};function dc(t){t.graph().dummyChains=[],t.edges().forEach(e=>pc(t,e))}function pc(t,e){let n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,s=e.name,a=t.edge(e),l=a.labelRank;if(o===r+1)return;t.removeEdge(e);let h,u,c;for(c=0,++r;r<o;++c,++r)a.points=[],u={width:0,height:0,edgeLabel:a,edgeObj:e,rank:r},h=cc.addDummyNode(t,"edge",u,"_d"),r===l&&(u.width=a.width,u.height=a.height,u.dummy="edge-label",u.labelpos=a.labelpos),t.setEdge(n,h,{weight:a.weight},s),c===0&&t.graph().dummyChains.push(h),n=h;t.setEdge(n,i,{weight:a.weight},s)}function gc(t){t.graph().dummyChains.forEach(e=>{let n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var Ut={longestPath:mc,slack:wc};function mc(t){var e={};function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var o=Math.min(...t.outEdges(r).map(s=>s==null?Number.POSITIVE_INFINITY:n(s.w)-t.edge(s).minlen));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}t.sources().forEach(n)}function wc(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var _c=ve.Graph,zt=Ut.slack,Zi=yc;function yc(t){var e=new _c({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,o;bc(e,t)<r;)i=vc(e,t),o=e.hasNode(i.v)?zt(t,i):-zt(t,i),xc(e,t,o);return e}function bc(t,e){function n(r){e.nodeEdges(r).forEach(i=>{var o=i.v,s=r===o?i.w:o;!t.hasNode(s)&&!zt(e,i)&&(t.setNode(s,{}),t.setEdge(r,s,{}),n(s))})}return t.nodes().forEach(n),t.nodeCount()}function vc(t,e){return e.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return t.hasNode(i.v)!==t.hasNode(i.w)&&(o=zt(e,i)),o<r[0]?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function xc(t,e,n){t.nodes().forEach(r=>e.node(r).rank+=n)}var Ec=Zi,gr=Ut.slack,kc=Ut.longestPath,Mc=ve.alg.preorder,Nc=ve.alg.postorder,Cc=ee.simplify,Tc=Ye;Ye.initLowLimValues=$n;Ye.initCutValues=Bn;Ye.calcCutValue=Qi;Ye.leaveEdge=eo;Ye.enterEdge=to;Ye.exchangeEdges=no;function Ye(t){t=Cc(t),kc(t);var e=Ec(t);$n(e),Bn(e,t);for(var n,r;n=eo(e);)r=to(e,t,n),no(e,t,n,r)}function Bn(t,e){var n=Nc(t,t.nodes());n=n.slice(0,n.length-1),n.forEach(r=>Sc(t,e,r))}function Sc(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=Qi(t,e,n)}function Qi(t,e,n){var r=t.node(n),i=r.parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,e.nodeEdges(n).forEach(l=>{var h=l.v===n,u=h?l.w:l.v;if(u!==i){var c=h===o,f=e.edge(l).weight;if(a+=c?f:-f,Pc(t,n,u)){var d=t.edge(n,u).cutvalue;a+=c?-d:d}}}),a}function $n(t,e){arguments.length<2&&(e=t.nodes()[0]),Ji(t,{},1,e)}function Ji(t,e,n,r,i){var o=n,s=t.node(r);return e[r]=!0,t.neighbors(r).forEach(a=>{e.hasOwnProperty(a)||(n=Ji(t,e,n,a,r))}),s.low=o,s.lim=n++,i?s.parent=i:delete s.parent,n}function eo(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function to(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),s=t.node(i),a=o,l=!1;o.lim>s.lim&&(a=s,l=!0);var h=e.edges().filter(u=>l===mr(t,t.node(u.v),a)&&l!==mr(t,t.node(u.w),a));return h.reduce((u,c)=>gr(e,c)<gr(e,u)?c:u)}function no(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),$n(t),Bn(t,e),Oc(t,e)}function Oc(t,e){var n=t.nodes().find(i=>!e.node(i).parent),r=Mc(t,n);r=r.slice(1),r.forEach(i=>{var o=t.node(i).parent,s=e.edge(i,o),a=!1;s||(s=e.edge(o,i),a=!0),e.node(i).rank=e.node(o).rank+(a?s.minlen:-s.minlen)})}function Pc(t,e,n){return t.hasEdge(e,n)}function mr(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var Lc=Ut,ro=Lc.longestPath,Ic=Zi,Ac=Tc,Rc=Dc;function Dc(t){switch(t.graph().ranker){case"network-simplex":wr(t);break;case"tight-tree":$c(t);break;case"longest-path":Bc(t);break;default:wr(t)}}var Bc=ro;function $c(t){ro(t),Ic(t)}function wr(t){Ac(t)}var Vc=Fc;function Fc(t){let e=zc(t);t.graph().dummyChains.forEach(n=>{let r=t.node(n),i=r.edgeObj,o=Wc(t,e,i.v,i.w),s=o.path,a=o.lca,l=0,h=s[l],u=!0;for(;n!==i.w;){if(r=t.node(n),u){for(;(h=s[l])!==a&&t.node(h).maxRank<r.rank;)l++;h===a&&(u=!1)}if(!u){for(;l<s.length-1&&t.node(h=s[l+1]).minRank<=r.rank;)l++;h=s[l]}t.setParent(n,h),n=t.successors(n)[0]}})}function Wc(t,e,n,r){let i=[],o=[],s=Math.min(e[n].low,e[r].low),a=Math.max(e[n].lim,e[r].lim),l,h;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>s||a>e[l].lim));for(h=l,l=r;(l=t.parent(l))!==h;)o.push(l);return{path:i.concat(o.reverse()),lca:h}}function zc(t){let e={},n=0;function r(i){let o=n;t.children(i).forEach(r),e[i]={low:o,lim:n++}}return t.children().forEach(r),e}let En=ee;var Gc={run:jc,cleanup:qc};function jc(t){let e=En.addDummyNode(t,"root",{},"_root"),n=Yc(t),r=Math.max(...Object.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,t.edges().forEach(s=>t.edge(s).minlen*=i);let o=Hc(t)+1;t.children().forEach(s=>io(t,e,i,o,r,n,s)),t.graph().nodeRankFactor=i}function io(t,e,n,r,i,o,s){let a=t.children(s);if(!a.length){s!==e&&t.setEdge(e,s,{weight:0,minlen:n});return}let l=En.addBorderNode(t,"_bt"),h=En.addBorderNode(t,"_bb"),u=t.node(s);t.setParent(l,s),u.borderTop=l,t.setParent(h,s),u.borderBottom=h,a.forEach(c=>{io(t,e,n,r,i,o,c);let f=t.node(c),d=f.borderTop?f.borderTop:c,g=f.borderBottom?f.borderBottom:c,y=f.borderTop?r:2*r,T=d!==g?1:i-o[s]+1;t.setEdge(l,d,{weight:y,minlen:T,nestingEdge:!0}),t.setEdge(g,h,{weight:y,minlen:T,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:i+o[s]})}function Yc(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&o.forEach(s=>n(s,i+1)),e[r]=i}return t.children().forEach(r=>n(r,1)),e}function Hc(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}function qc(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(n=>{var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}let Xc=ee;var Uc=Kc;function Kc(t){function e(n){let r=t.children(n),i=t.node(n);if(r.length&&r.forEach(e),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let o=i.minRank,s=i.maxRank+1;o<s;++o)_r(t,"borderLeft","_bl",n,i,o),_r(t,"borderRight","_br",n,i,o)}}t.children().forEach(e)}function _r(t,e,n,r,i,o){let s={width:0,height:0,rank:o,borderType:e},a=i[e][o-1],l=Xc.addDummyNode(t,"border",s,n);i[e][o]=l,t.setParent(l,r),a&&t.setEdge(a,l,{weight:1})}var Zc={adjust:Qc,undo:Jc};function Qc(t){let e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&oo(t)}function Jc(t){let e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&ef(t),(e==="lr"||e==="rl")&&(tf(t),oo(t))}function oo(t){t.nodes().forEach(e=>yr(t.node(e))),t.edges().forEach(e=>yr(t.edge(e)))}function yr(t){let e=t.width;t.width=t.height,t.height=e}function ef(t){t.nodes().forEach(e=>rn(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(rn),n.hasOwnProperty("y")&&rn(n)})}function rn(t){t.y=-t.y}function tf(t){t.nodes().forEach(e=>on(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(on),n.hasOwnProperty("x")&&on(n)})}function on(t){let e=t.x;t.x=t.y,t.y=e}let nf=ee;var rf=of;function of(t){let e={},n=t.nodes().filter(a=>!t.children(a).length),r=Math.max(...n.map(a=>t.node(a).rank)),i=nf.range(r+1).map(()=>[]);function o(a){if(e[a])return;e[a]=!0;let l=t.node(a);i[l.rank].push(a),t.successors(a).forEach(o)}return n.sort((a,l)=>t.node(a).rank-t.node(l).rank).forEach(o),i}let sf=ee.zipObject;var af=lf;function lf(t,e){let n=0;for(let r=1;r<e.length;++r)n+=uf(t,e[r-1],e[r]);return n}function uf(t,e,n){let r=sf(n,n.map((h,u)=>u)),i=e.flatMap(h=>t.outEdges(h).map(u=>({pos:r[u.w],weight:t.edge(u).weight})).sort((u,c)=>u.pos-c.pos)),o=1;for(;o<n.length;)o<<=1;let s=2*o-1;o-=1;let a=new Array(s).fill(0),l=0;return i.forEach(h=>{let u=h.pos+o;a[u]+=h.weight;let c=0;for(;u>0;)u%2&&(c+=a[u+1]),u=u-1>>1,a[u]+=h.weight;l+=h.weight*c}),l}var hf=cf;function cf(t,e=[]){return e.map(n=>{let r=t.inEdges(n);if(r.length){let i=r.reduce((o,s)=>{let a=t.edge(s),l=t.node(s.v);return{sum:o.sum+a.weight*l.order,weight:o.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let ff=ee;var df=pf;function pf(t,e){let n={};t.forEach((i,o)=>{let s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};i.barycenter!==void 0&&(s.barycenter=i.barycenter,s.weight=i.weight)}),e.edges().forEach(i=>{let o=n[i.v],s=n[i.w];o!==void 0&&s!==void 0&&(s.indegree++,o.out.push(n[i.w]))});let r=Object.values(n).filter(i=>!i.indegree);return gf(r)}function gf(t){let e=[];function n(i){return o=>{o.merged||(o.barycenter===void 0||i.barycenter===void 0||o.barycenter>=i.barycenter)&&mf(i,o)}}function r(i){return o=>{o.in.push(i),--o.indegree===0&&t.push(o)}}for(;t.length;){let i=t.pop();e.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return e.filter(i=>!i.merged).map(i=>ff.pick(i,["vs","i","barycenter","weight"]))}function mf(t,e){let n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}let wf=ee;var _f=yf;function yf(t,e){let n=wf.partition(t,u=>u.hasOwnProperty("barycenter")),r=n.lhs,i=n.rhs.sort((u,c)=>c.i-u.i),o=[],s=0,a=0,l=0;r.sort(bf(!!e)),l=br(o,i,l),r.forEach(u=>{l+=u.vs.length,o.push(u.vs),s+=u.barycenter*u.weight,a+=u.weight,l=br(o,i,l)});let h={vs:o.flat(!0)};return a&&(h.barycenter=s/a,h.weight=a),h}function br(t,e,n){let r;for(;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}function bf(t){return(e,n)=>e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}let vf=hf,xf=df,Ef=_f;var kf=so;function so(t,e,n,r){let i=t.children(e),o=t.node(e),s=o?o.borderLeft:void 0,a=o?o.borderRight:void 0,l={};s&&(i=i.filter(f=>f!==s&&f!==a));let h=vf(t,i);h.forEach(f=>{if(t.children(f.v).length){let d=so(t,f.v,n,r);l[f.v]=d,d.hasOwnProperty("barycenter")&&Nf(f,d)}});let u=xf(h,n);Mf(u,l);let c=Ef(u,r);if(s&&(c.vs=[s,c.vs,a].flat(!0),t.predecessors(s).length)){let f=t.node(t.predecessors(s)[0]),d=t.node(t.predecessors(a)[0]);c.hasOwnProperty("barycenter")||(c.barycenter=0,c.weight=0),c.barycenter=(c.barycenter*c.weight+f.order+d.order)/(c.weight+2),c.weight+=2}return c}function Mf(t,e){t.forEach(n=>{n.vs=n.vs.flatMap(r=>e[r]?e[r].vs:r)})}function Nf(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)}let Cf=ve.Graph,Tf=ee;var Sf=Of;function Of(t,e,n){let r=Pf(t),i=new Cf({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(o=>t.node(o));return t.nodes().forEach(o=>{let s=t.node(o),a=t.parent(o);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(o),i.setParent(o,a||r),t[n](o).forEach(l=>{let h=l.v===o?l.w:l.v,u=i.edge(h,o),c=u!==void 0?u.weight:0;i.setEdge(h,o,{weight:t.edge(l).weight+c})}),s.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i}function Pf(t){for(var e;t.hasNode(e=Tf.uniqueId("_root")););return e}var Lf=If;function If(t,e,n){let r={},i;n.forEach(o=>{let s=t.parent(o),a,l;for(;s;){if(a=t.parent(s),a?(l=r[a],r[a]=s):(l=i,i=s),l&&l!==s){e.setEdge(l,s);return}s=a}})}let Af=rf,Rf=af,Df=kf,Bf=Sf,$f=Lf,Vf=ve.Graph,Ct=ee;var Ff=ao;function ao(t,e){if(e&&typeof e.customOrder=="function"){e.customOrder(t,ao);return}let n=Ct.maxRank(t),r=vr(t,Ct.range(1,n+1),"inEdges"),i=vr(t,Ct.range(n-1,-1,-1),"outEdges"),o=Af(t);if(xr(t,o),e&&e.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,a;for(let l=0,h=0;h<4;++l,++h){Wf(l%2?r:i,l%4>=2),o=Ct.buildLayerMatrix(t);let u=Rf(t,o);u<s&&(h=0,a=Object.assign({},o),s=u)}xr(t,a)}function vr(t,e,n){return e.map(function(r){return Bf(t,r,n)})}function Wf(t,e){let n=new Vf;t.forEach(function(r){let i=r.graph().root,o=Df(r,i,n,e);o.vs.forEach((s,a)=>r.node(s).order=a),$f(r,n,o.vs)})}function xr(t,e){Object.values(e).forEach(n=>n.forEach((r,i)=>t.node(r).order=i))}let zf=ve.Graph,wt=ee;var Gf={positionX:Hf,findType1Conflicts:lo,findType2Conflicts:uo,addConflict:Vn,hasConflict:ho,verticalAlignment:co,horizontalCompaction:fo,alignCoordinates:go,findSmallestWidthAlignment:po,balance:mo};function lo(t,e){let n={};function r(i,o){let s=0,a=0,l=i.length,h=o[o.length-1];return o.forEach((u,c)=>{let f=jf(t,u),d=f?t.node(f).order:l;(f||u===h)&&(o.slice(a,c+1).forEach(g=>{t.predecessors(g).forEach(y=>{let T=t.node(y),S=T.order;(S<s||d<S)&&!(T.dummy&&t.node(g).dummy)&&Vn(n,y,g)})}),a=c+1,s=d)}),o}return e.length&&e.reduce(r),n}function uo(t,e){let n={};function r(o,s,a,l,h){let u;wt.range(s,a).forEach(c=>{u=o[c],t.node(u).dummy&&t.predecessors(u).forEach(f=>{let d=t.node(f);d.dummy&&(d.order<l||d.order>h)&&Vn(n,f,u)})})}function i(o,s){let a=-1,l,h=0;return s.forEach((u,c)=>{if(t.node(u).dummy==="border"){let f=t.predecessors(u);f.length&&(l=t.node(f[0]).order,r(s,h,c,a,l),h=c,a=l)}r(s,h,s.length,l,o.length)}),s}return e.length&&e.reduce(i),n}function jf(t,e){if(t.node(e).dummy)return t.predecessors(e).find(n=>t.node(n).dummy)}function Vn(t,e,n){if(e>n){let i=e;e=n,n=i}let r=t[e];r||(t[e]=r={}),r[n]=!0}function ho(t,e,n){if(e>n){let r=e;e=n,n=r}return!!t[e]&&t[e].hasOwnProperty(n)}function co(t,e,n,r){let i={},o={},s={};return e.forEach(a=>{a.forEach((l,h)=>{i[l]=l,o[l]=l,s[l]=h})}),e.forEach(a=>{let l=-1;a.forEach(h=>{let u=r(h);if(u.length){u=u.sort((f,d)=>s[f]-s[d]);let c=(u.length-1)/2;for(let f=Math.floor(c),d=Math.ceil(c);f<=d;++f){let g=u[f];o[h]===h&&l<s[g]&&!ho(n,h,g)&&(o[g]=h,o[h]=i[h]=i[g],l=s[g])}}})}),{root:i,align:o}}function fo(t,e,n,r,i){let o={},s=Yf(t,e,n,i),a=i?"borderLeft":"borderRight";function l(c,f){let d=s.nodes(),g=d.pop(),y={};for(;g;)y[g]?c(g):(y[g]=!0,d.push(g),d=d.concat(f(g))),g=d.pop()}function h(c){o[c]=s.inEdges(c).reduce((f,d)=>Math.max(f,o[d.v]+s.edge(d)),0)}function u(c){let f=s.outEdges(c).reduce((g,y)=>Math.min(g,o[y.w]-s.edge(y)),Number.POSITIVE_INFINITY),d=t.node(c);f!==Number.POSITIVE_INFINITY&&d.borderType!==a&&(o[c]=Math.max(o[c],f))}return l(h,s.predecessors.bind(s)),l(u,s.successors.bind(s)),Object.keys(r).forEach(c=>o[c]=o[n[c]]),o}function Yf(t,e,n,r){let i=new zf,o=t.graph(),s=qf(o.nodesep,o.edgesep,r);return e.forEach(a=>{let l;a.forEach(h=>{let u=n[h];if(i.setNode(u),l){var c=n[l],f=i.edge(c,u);i.setEdge(c,u,Math.max(s(t,h,l),f||0))}l=h})}),i}function po(t,e){return Object.values(e).reduce((n,r)=>{let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([a,l])=>{let h=Xf(t,a)/2;i=Math.max(l+h,i),o=Math.min(l-h,o)});const s=i-o;return s<n[0]&&(n=[s,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function go(t,e){let n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(o=>{["l","r"].forEach(s=>{let a=o+s,l=t[a];if(l===e)return;let h=Object.values(l),u=r-Math.min(...h);s!=="l"&&(u=i-Math.max(...h)),u&&(t[a]=wt.mapValues(l,c=>c+u))})})}function mo(t,e){return wt.mapValues(t.ul,(n,r)=>{if(e)return t[e.toLowerCase()][r];{let i=Object.values(t).map(o=>o[r]).sort((o,s)=>o-s);return(i[1]+i[2])/2}})}function Hf(t){let e=wt.buildLayerMatrix(t),n=Object.assign(lo(t,e),uo(t,e)),r={},i;["u","d"].forEach(s=>{i=s==="u"?e:Object.values(e).reverse(),["l","r"].forEach(a=>{a==="r"&&(i=i.map(c=>Object.values(c).reverse()));let l=(s==="u"?t.predecessors:t.successors).bind(t),h=co(t,i,n,l),u=fo(t,i,h.root,h.align,a==="r");a==="r"&&(u=wt.mapValues(u,c=>-c)),r[s+a]=u})});let o=po(t,r);return go(r,o),mo(r,t.graph().align)}function qf(t,e,n){return(r,i,o)=>{let s=r.node(i),a=r.node(o),l=0,h;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":h=-s.width/2;break;case"r":h=s.width/2;break}if(h&&(l+=n?h:-h),h=0,l+=(s.dummy?e:t)/2,l+=(a.dummy?e:t)/2,l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":h=a.width/2;break;case"r":h=-a.width/2;break}return h&&(l+=n?h:-h),h=0,l}}function Xf(t,e){return t.node(e).width}let wo=ee,Uf=Gf.positionX;var Kf=Zf;function Zf(t){t=wo.asNonCompoundGraph(t),Qf(t),Object.entries(Uf(t)).forEach(([e,n])=>t.node(e).x=n)}function Qf(t){let e=wo.buildLayerMatrix(t),n=t.graph().ranksep,r=0;e.forEach(i=>{const o=i.reduce((s,a)=>{const l=t.node(a).height;return s>l?s:l},0);i.forEach(s=>t.node(s).y=r+o/2),r+=o+n})}let Er=ac,kr=fc,Jf=Rc,ed=ee.normalizeRanks,td=Vc,nd=ee.removeEmptyRanks,Mr=Gc,rd=Uc,Nr=Zc,id=Ff,od=Kf,me=ee,sd=ve.Graph;var ad=ld;function ld(t,e){let n=e&&e.debugTiming?me.time:me.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>_d(t));n("  runLayout",()=>ud(r,n)),n("  updateInputGraph",()=>hd(t,r))})}function ud(t,e){e("    makeSpaceForEdgeLabels",()=>yd(t)),e("    removeSelfEdges",()=>Td(t)),e("    acyclic",()=>Er.run(t)),e("    nestingGraph.run",()=>Mr.run(t)),e("    rank",()=>Jf(me.asNonCompoundGraph(t))),e("    injectEdgeLabelProxies",()=>bd(t)),e("    removeEmptyRanks",()=>nd(t)),e("    nestingGraph.cleanup",()=>Mr.cleanup(t)),e("    normalizeRanks",()=>ed(t)),e("    assignRankMinMax",()=>vd(t)),e("    removeEdgeLabelProxies",()=>xd(t)),e("    normalize.run",()=>kr.run(t)),e("    parentDummyChains",()=>td(t)),e("    addBorderSegments",()=>rd(t)),e("    order",()=>id(t)),e("    insertSelfEdges",()=>Sd(t)),e("    adjustCoordinateSystem",()=>Nr.adjust(t)),e("    position",()=>od(t)),e("    positionSelfEdges",()=>Od(t)),e("    removeBorderNodes",()=>Cd(t)),e("    normalize.undo",()=>kr.undo(t)),e("    fixupEdgeLabelCoords",()=>Md(t)),e("    undoCoordinateSystem",()=>Nr.undo(t)),e("    translateGraph",()=>Ed(t)),e("    assignNodeIntersects",()=>kd(t)),e("    reversePoints",()=>Nd(t)),e("    acyclic.undo",()=>Er.undo(t))}function hd(t,e){t.nodes().forEach(n=>{let r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{let r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}let cd=["nodesep","edgesep","ranksep","marginx","marginy"],fd={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},dd=["acyclicer","ranker","rankdir","align"],pd=["width","height"],Cr={width:0,height:0},gd=["minlen","weight","width","height","labeloffset"],md={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},wd=["labelpos"];function _d(t){let e=new sd({multigraph:!0,compound:!0}),n=an(t.graph());return e.setGraph(Object.assign({},fd,sn(n,cd),me.pick(n,dd))),t.nodes().forEach(r=>{let i=an(t.node(r));const o=sn(i,pd);Object.keys(Cr).forEach(s=>{o[s]===void 0&&(o[s]=Cr[s])}),e.setNode(r,o),e.setParent(r,t.parent(r))}),t.edges().forEach(r=>{let i=an(t.edge(r));e.setEdge(r,Object.assign({},md,sn(i,gd),me.pick(i,wd)))}),e}function yd(t){let e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{let r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function bd(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.width&&n.height){let r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};me.addDummyNode(t,"edge-proxy",o,"_ep")}})}function vd(t){let e=0;t.nodes().forEach(n=>{let r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}function xd(t){t.nodes().forEach(e=>{let n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function Ed(t){let e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),s=o.marginx||0,a=o.marginy||0;function l(h){let u=h.x,c=h.y,f=h.width,d=h.height;e=Math.min(e,u-f/2),n=Math.max(n,u+f/2),r=Math.min(r,c-d/2),i=Math.max(i,c+d/2)}t.nodes().forEach(h=>l(t.node(h))),t.edges().forEach(h=>{let u=t.edge(h);u.hasOwnProperty("x")&&l(u)}),e-=s,r-=a,t.nodes().forEach(h=>{let u=t.node(h);u.x-=e,u.y-=r}),t.edges().forEach(h=>{let u=t.edge(h);u.points.forEach(c=>{c.x-=e,c.y-=r}),u.hasOwnProperty("x")&&(u.x-=e),u.hasOwnProperty("y")&&(u.y-=r)}),o.width=n-e+s,o.height=i-r+a}function kd(t){t.edges().forEach(e=>{let n=t.edge(e),r=t.node(e.v),i=t.node(e.w),o,s;n.points?(o=n.points[0],s=n.points[n.points.length-1]):(n.points=[],o=i,s=r),n.points.unshift(me.intersectRect(r,o)),n.points.push(me.intersectRect(i,s))})}function Md(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Nd(t){t.edges().forEach(e=>{let n=t.edge(e);n.reversed&&n.points.reverse()})}function Cd(t){t.nodes().forEach(e=>{if(t.children(e).length){let n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),s=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{t.node(e).dummy==="border"&&t.removeNode(e)})}function Td(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Sd(t){var e=me.buildLayerMatrix(t);e.forEach(n=>{var r=0;n.forEach((i,o)=>{var s=t.node(i);s.order=o+r,(s.selfEdges||[]).forEach(a=>{me.addDummyNode(t,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:o+ ++r,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function Od(t){t.nodes().forEach(e=>{var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}function sn(t,e){return me.mapValues(me.pick(t,e),Number)}function an(t){var e={};return t&&Object.entries(t).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),e[n]=r}),e}let Pd=ee,Ld=ve.Graph;var Id={debugOrdering:Ad};function Ad(t){let e=Pd.buildLayerMatrix(t),n=new Ld({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),t.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),e.forEach((r,i)=>{let o="layer"+i;n.setNode(o,{rank:"same"}),r.reduce((s,a)=>(n.setEdge(s,a,{style:"invis"}),a))}),n}var Rd="1.1.2",Rt={graphlib:ve,layout:ad,debug:Id,util:{time:ee.time,notime:ee.notime},version:Rd};const Tr=Wu(Rt);class Dd{compute(e,n){const r=new Tr.graphlib.Graph;r.setGraph({}),r.setDefaultEdgeLabel(()=>({})),r.setDefaultNodeLabel(()=>({}));const i=new Map,o=new Map,s=new Map,a=new Map,l=b=>{const w=e.childrenT(b);if(w.length===0){const m=e.node(b).build(),{width:_,height:k}=m.boundingBox();r.setNode(b,{width:_,height:k}),i.set(b,m)}else{if(!n.has(b)&&b!==e.root()){const m=e.node(b);s.set(b,{boundingBox:{},name:m.humanReadable()||b})}for(const m of w)if(n.has(m))for(const _ of e.hierarchyPreorder(m)){const k=e.node(m).build();a.set(_,m);const{width:C,height:A}=k.boundingBox();r.setNode(m,{width:C,height:A}),o.set(m,k)}else l(m)}};l(e.root());for(const{v:b,w}of e.edges()){const m=a.get(b)||b,_=a.get(w)||w;m!==_&&r.setEdge(m,_)}const h=performance.now();Tr.layout(r);const u=performance.now(),{width:c,height:f}=r.graph(),d=new q(0,0,c,f);for(const[b,w]of i.entries()){const{x:m,y:_,width:k,height:C}=r.node(b);w.moveTo(m-k/2,_-C/2)}for(const[b,w]of o.entries()){const{x:m,y:_,width:k,height:C}=r.node(b);w.moveTo(m-k/2,_-C/2)}const g=20;for(const b of e.hierarchyPostorder()){const w=s.get(b);if(w!==void 0){const m=e.childrenT(b).reduce((_,k)=>{const C=i.get(k)?.boundingBox();C!==void 0&&_.push(C);const A=o.get(k)?.boundingBox();A!==void 0&&_.push(A);const W=s.get(k)?.boundingBox;if(W!==void 0&&k!==b){const X=2*-g+10,K=q.fromCenterAndDimension(W.center,W.width+X,W.height+X);_.push(K)}return _},[]);w.boundingBox=q.fromUnion(...m).padded(g)}}const y=r.edges().map(b=>{const{points:w}=r.edge(b);return[{from:b.v,to:b.w},new xu(w)]}).map(([b,w])=>w),T={layoutTimeMs:u-h},S=new Eu(...y);return{nodes:i,collapsed:o,expanded:s,edges:S,boundingBox:d.union(S.boundingBox()),stats:T}}}class _o extends Rt.graphlib.Graph{constructor(e){super({compound:!0}),e!==void 0?Object.assign(this,e):(this.setGraph({}),this.setDefaultEdgeLabel(()=>({})))}setNodeWithParent(e,n,r){this.setNode(e,n),this.setParent(e,r)}parents(e){const n=[];let r=this.parent(e);for(;r!==void 0;)n.push(r),r=this.parent(r);return n}hierarchyPreorder(e){const n=[],r=e!==void 0?e:this.root(),i=o=>{n.push(o);for(const s of this.childrenT(o))i(s)};for(const o of this.childrenT(r))i(o);return n}hierarchyPostorder(e){const n=[],r=e!==void 0?e:this.root(),i=o=>{for(const s of this.childrenT(o))i(s);n.push(o)};for(const o of this.childrenT(r))i(o);return n}childrenT(e){return this.children(e)}parent(e){return super.parent(e)}nodes(){return super.nodes()}modules(){return this.nodes().filter(e=>this.childrenT(e).length>0)}edges(){return super.edges()}root(){return"\0"}toJson(){return Rt.graphlib.json.write(this)}static readJson(e){return new _o(Rt.graphlib.json.read(e))}}function Bd(t,e,n,r){const i=new Set,o=new Set;if(r.expand)for(const a of e)for(const l of t.parents(a))n.has(l)?o.add(l):i.add(l);const s=new Set;if(r.collapseOthers)for(const a of t.modules())!o.has(a)&&!n.has(a)&&!i.has(a)&&s.add(a);return{collapse:s,expand:o}}function $d(t,e){const n=r=>e.has(r)||t.childrenT(r).length===0?1:t.childrenT(r).reduce((i,o)=>i+n(o),0);return t.childrenT(t.root()).reduce((r,i)=>r+n(i),0)}function Vd(t){let e;return{c(){e=V("path"),this.h()},l(n){e=F(n,"path",{d:!0,transform:!0,fill:!0,stroke:!0}),L(e).forEach(E),this.h()},h(){p(e,"d","M20.441,59.9614212 C21.0957895,59.9614212 22.7266842,56.6764211 22.7266842,52.7482369 L22.7266842,38.6593685 L18.182579,38.6593685 L18.182579,52.7482369 C18.182579,56.6764211 19.8134737,59.9614212 20.441,59.9614212 Z M4.26163159,40.7638948 L36.6204211,40.7638948 C38.9460001,40.7638948 40.4145264,39.317579 40.4145264,37.1453685 C40.4145264,29.5821053 31.9740001,21.9558421 20.441,21.9558421 C8.93526317,21.9558421 0.494736843,29.5821053 0.494736843,37.1453685 C0.494736843,39.317579 1.96884211,40.7638948 4.26163159,40.7638948 Z M5.2911579,36.8756316 C4.71700001,36.8756316 4.4541579,36.5583159 4.56310527,35.8480001 C5.1023158,31.2280527 11.0429474,25.7078948 20.441,25.7078948 C29.8718948,25.7078948 35.7796843,31.2280527 36.346158,35.8480001 C36.4551053,36.5583159 36.1650001,36.8756316 35.5908948,36.8756316 L5.2911579,36.8756316 Z M3.74989474,2.76857895 C3.74989474,3.55452632 4.0611579,4.40605264 4.72705264,5.26868422 C6.03868422,7.0183158 9.13778949,9.44489475 12.3810527,11.5798421 L11.4523158,25.1263685 L15.5584737,25.1263685 L16.4983158,9.67205265 C16.5311053,9.30078949 16.4711053,9.17515791 16.2254211,9.04952633 C12.3641579,7.09368422 9.37084212,4.73952632 9.18573686,4.22889474 C8.96778949,3.90094737 9.18626317,3.66589474 9.48189475,3.66589474 L31.4273685,3.66589474 C31.7013158,3.66589474 31.9142106,3.90094737 31.7291053,4.22889474 C31.5112106,4.73952632 28.5451053,7.09368422 24.6621579,9.04952633 C24.4437369,9.17515791 24.3836843,9.30078949 24.4164737,9.67205265 L25.3563685,25.1263685 L29.4569474,25.1263685 L28.501,11.5798421 C31.7497895,9.44489475 34.8488948,7.0183158 36.1605264,5.26868422 C36.8481053,4.40605264 37.1593685,3.55452632 37.1593685,2.76857895 C37.1593685,1.20726316 35.9421053,0.0500000001 34.1512632,0.0500000001 L6.75800001,0.0500000001 C4.93989475,0.0500000001 3.74989474,1.20726316 3.74989474,2.76857895 Z"),p(e,"transform","translate(11.737 2)"),p(e,"fill",t[0]),p(e,"stroke",t[1])},m(n,r){I(n,e,r)},p(n,[r]){r&1&&p(e,"fill",n[0]),r&2&&p(e,"stroke",n[1])},i:Y,o:Y,d(n){n&&E(e)}}}function Fd(t,e,n){let{fill:r="white"}=e,{stroke:i="white"}=e;return t.$$set=o=>{"fill"in o&&n(0,r=o.fill),"stroke"in o&&n(1,i=o.stroke)},[r,i]}class Wd extends ae{constructor(e){super(),le(this,e,Fd,Vd,se,{fill:0,stroke:1})}}function zd(t){let e,n,r,i,o,s,a,l,h,u,c,f,d;const g=[{self:t[0].content}];var y=t[0].content.drawable();function T(S,b){let w={};for(let m=0;m<g.length;m+=1)w=Ie(w,g[m]);return b!==void 0&&b&1&&(w=Ie(w,Je(g,[{self:S[0].content}]))),{props:w}}return y&&(n=Qe(y,T(t))),h=new Wd({}),{c(){e=V("g"),n&&Z(n.$$.fragment),r=V("g"),i=V("rect"),s=V("text"),a=Ae("Pin"),l=V("g"),Z(h.$$.fragment),this.h()},l(S){e=F(S,"g",{role:!0});var b=L(e);n&&oe(n.$$.fragment,b),r=F(b,"g",{transform:!0,cursor:!0});var w=L(r);i=F(w,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(i).forEach(E),s=F(w,"text",{x:!0,y:!0,"font-family":!0,"font-size":!0,"text-anchor":!0,"dominant-baseline":!0,fill:!0});var m=L(s);a=Re(m,"Pin"),m.forEach(E),l=F(w,"g",{transform:!0});var _=L(l);oe(h.$$.fragment,_),_.forEach(E),w.forEach(E),b.forEach(E),this.h()},h(){p(i,"x","-37"),p(i,"y","-10"),p(i,"width","50"),p(i,"height","20"),p(i,"rx","10"),p(i,"fill",o=t[1]==="pinned"?"orange":"rgb(51,51,51)"),p(i,"stroke","white"),p(i,"stroke-width","2"),p(s,"x","-18"),p(s,"y",1),p(s,"font-family",jt.family),p(s,"font-size","10"),p(s,"text-anchor","middle"),p(s,"dominant-baseline","middle"),p(s,"fill","white"),p(l,"transform","scale(0.2) translate(-32 -30)"),p(r,"transform",u=`translate(${t[2].width+t[6].x},${-t[6].y})`),p(r,"cursor","pointer"),p(e,"role","tooltip")},m(S,b){I(S,e,b),n&&Q(n,e,null),B(e,r),B(r,i),B(r,s),B(s,a),B(r,l),Q(h,l,null),c=!0,f||(d=[H(r,"click",t[3]),H(r,"keydown",t[3]),H(e,"mouseenter",t[4]),H(e,"mouseleave",t[5])],f=!0)},p(S,[b]){if(b&1&&y!==(y=S[0].content.drawable())){if(n){ce();const w=n;D(w.$$.fragment,1,0,()=>{J(w,1)}),fe()}y?(n=Qe(y,T(S,b)),Z(n.$$.fragment),P(n.$$.fragment,1),Q(n,e,r)):n=null}else if(y){const w=b&1?Je(g,[{self:S[0].content}]):{};n.$set(w)}(!c||b&2&&o!==(o=S[1]==="pinned"?"orange":"rgb(51,51,51)"))&&p(i,"fill",o),(!c||b&4&&u!==(u=`translate(${S[2].width+S[6].x},${-S[6].y})`))&&p(r,"transform",u)},i(S){c||(n&&P(n.$$.fragment,S),P(h.$$.fragment,S),c=!0)},o(S){n&&D(n.$$.fragment,S),D(h.$$.fragment,S),c=!1},d(S){S&&E(e),n&&J(n),J(h),f=!1,Gt(d)}}}function Gd(t,e,n){let r,{nodeId:i}=e,{tooltip:o}=e,{state:s}=e;const a=nt();function l(f){f.stopPropagation(),a("togglePin",{nodeId:i})}function h(f){a("nodeEnter",{...f,nodeId:i})}function u(f){a("nodeLeave",{...f,nodeId:i})}const c={x:1,y:1};return t.$$set=f=>{"nodeId"in f&&n(7,i=f.nodeId),"tooltip"in f&&n(0,o=f.tooltip),"state"in f&&n(1,s=f.state)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=o.boundingBox())},[o,s,r,l,h,u,c,i]}class jd extends ae{constructor(e){super(),le(this,e,Gd,zd,se,{nodeId:7,tooltip:0,state:1})}}const yo=300;function Yd(t,e,n){function r(){t.update(i=>(i.set(e,{tooltip:n,state:"active"}),i))}return window.setTimeout(r,yo)}function bo(t,e){t.update(n=>{const r=n.get(e);return r!==void 0&&r.state!=="pinned"&&(r.state!=="active"&&window.clearTimeout(r.state),n.set(e,{...r,state:"active"})),n})}function vo(t,e){function n(){t.update(r=>(r.delete(e),r))}t.update(r=>{const i=r.get(e);return i!==void 0&&i.state!=="pinned"&&r.set(e,{...i,state:window.setTimeout(n,yo)}),r})}function Hd(t,e){t.update(n=>{const r=n.get(e);return r!==void 0&&(r.state==="pinned"?n.set(e,{...r,state:"active"}):n.set(e,{...r,state:"pinned"})),n})}function Sr(t,e,n){const r=t.slice();return r[9]=e[n][0],r[10]=e[n][1].position,r[11]=e[n][1].tooltip,r[12]=e[n][1].state,r}function Or(t,e){let n,r,i,o;return r=new jd({props:{nodeId:e[9],tooltip:e[11],state:e[12]}}),r.$on("mouseenter",e[2]),r.$on("mouseleave",e[3]),r.$on("togglePin",e[4]),r.$on("nodeEnter",e[7]),r.$on("nodeLeave",e[8]),{key:t,first:null,c(){n=V("g"),Z(r.$$.fragment),this.h()},l(s){n=F(s,"g",{transform:!0});var a=L(n);oe(r.$$.fragment,a),a.forEach(E),this.h()},h(){p(n,"transform",i=`translate(${e[10].x},${e[10].y})`),this.first=n},m(s,a){I(s,n,a),Q(r,n,null),o=!0},p(s,a){e=s;const l={};a&1&&(l.nodeId=e[9]),a&1&&(l.tooltip=e[11]),a&1&&(l.state=e[12]),r.$set(l),(!o||a&1&&i!==(i=`translate(${e[10].x},${e[10].y})`))&&p(n,"transform",i)},i(s){o||(P(r.$$.fragment,s),o=!0)},o(s){D(r.$$.fragment,s),o=!1},d(s){s&&E(n),J(r)}}}function qd(t){let e=[],n=new Map,r,i,o=ge(t[0]);const s=a=>a[9];for(let a=0;a<o.length;a+=1){let l=Sr(t,o,a),h=s(l);n.set(h,e[a]=Or(h,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=G()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);r=G()},m(a,l){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(a,l);I(a,r,l),i=!0},p(a,[l]){l&29&&(o=ge(a[0]),ce(),e=St(e,l,s,1,a,o,n,r.parentNode,Ot,Or,r,Sr),fe())},i(a){if(!i){for(let l=0;l<o.length;l+=1)P(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)D(e[l]);i=!1},d(a){a&&E(r);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}const Xd=20;function Ud(t,e,n){let r,i;const{tooltips:o}=ei(In);ti(t,o,f=>n(6,i=f));let{nodeLayouts:s}=e;function a(f){bo(o,f.detail.nodeId)}function l(f){vo(o,f.detail.nodeId)}function h(f){Hd(o,f.detail.nodeId)}function u(f){ue.call(this,t,f)}function c(f){ue.call(this,t,f)}return t.$$set=f=>{"nodeLayouts"in f&&n(5,s=f.nodeLayouts)},t.$$.update=()=>{t.$$.dirty&96&&n(0,r=[...i.entries()].filter(([f])=>s.has(f)).map(([f,{tooltip:d,state:g}])=>{const y=s.get(f)?.boundingBox(),T=gu(y,d.boundingBox(),d.options.anchor,Xd);return[f,{position:T,tooltip:d,state:g}]}))},[r,o,a,l,h,s,i,u,c]}class Kd extends ae{constructor(e){super(),le(this,e,Ud,qd,se,{nodeLayouts:5})}}function Zd(t){let e,n,r,i,o,s,a,l,h;return{c(){e=V("g"),n=V("rect"),o=V("text"),s=Ae(t[0]),this.h()},l(u){e=F(u,"g",{class:!0,transform:!0});var c=L(e);n=F(c,"rect",{width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,rx:!0,class:!0}),L(n).forEach(E),o=F(c,"text",{y:!0,"font-family":!0,class:!0});var f=L(o);s=Re(f,t[0]),f.forEach(E),c.forEach(E),this.h()},h(){p(n,"width",r=t[1].width),p(n,"height",i=t[1].height),p(n,"fill","rgb(250,250,250)"),p(n,"stroke","rgb(134, 134, 139)"),p(n,"stroke-width","1"),p(n,"rx","6"),p(n,"class","svelte-76qmi8"),p(o,"y","-2"),p(o,"font-family",jt.family),p(o,"class","svelte-76qmi8"),p(e,"class","expand svelte-76qmi8"),p(e,"transform",a=`translate(${t[1].xMin},${t[1].yMin})`)},m(u,c){I(u,e,c),B(e,n),B(e,o),B(o,s),l||(h=[H(e,"click",t[5]),H(e,"dblclick",t[6]),H(e,"mouseenter",t[2]),H(e,"mouseleave",t[3])],l=!0)},p(u,[c]){c&2&&r!==(r=u[1].width)&&p(n,"width",r),c&2&&i!==(i=u[1].height)&&p(n,"height",i),c&1&&_t(s,u[0]),c&2&&a!==(a=`translate(${u[1].xMin},${u[1].yMin})`)&&p(e,"transform",a)},i:Y,o:Y,d(u){u&&E(e),l=!1,Gt(h)}}}function Qd(t,e,n){const r=nt();let{nodeId:i}=e,{name:o}=e,{boundingBox:s}=e;function a(){r("nodeEnter",{nodeId:i})}function l(){r("nodeLeave",{nodeId:i})}function h(c){ue.call(this,t,c)}function u(c){ue.call(this,t,c)}return t.$$set=c=>{"nodeId"in c&&n(4,i=c.nodeId),"name"in c&&n(0,o=c.name),"boundingBox"in c&&n(1,s=c.boundingBox)},[o,s,a,l,i,h,u]}class Jd extends ae{constructor(e){super(),le(this,e,Qd,Zd,se,{nodeId:4,name:0,boundingBox:1})}}class Fn{constructor(e,n,r={x:0,y:0},i=1){this.width=e,this.height=n,this.cameraPos=r,this.cameraScale=i}viewToWorld(){return un.identity().translate(this.cameraPos.x,this.cameraPos.y)}worldToView(){return this.viewToWorld().inverse()}screenToView(){return un.identity().scale(1/this.cameraScale).translate(-this.width/2,-this.height/2)}viewToScreen(){return this.screenToView().inverse()}worldToScreen(){const e=this.worldToView();return this.viewToScreen().scale(e.k).translate(e.x,e.y)}screenToWorld(){return this.worldToScreen().inverse()}screenWidth(){return this.width}screenHeight(){return this.height}moveBy(e,n){this.cameraPos.x+=e,this.cameraPos.y+=n}moveTo(e,n){this.cameraPos.x=e,this.cameraPos.y=n}resize(e,n){this.width=e,this.height=n}center(){return this.cameraPos}scale(){return this.cameraScale}scaleBy(e){this.cameraScale*=e}scaleTo(e){this.cameraScale=e}fit(e){const{x:n,y:r}=e.center;this.moveTo(n,r);const i=Math.min(this.width/e.width,this.height/e.height);this.scaleTo(i||1)}world(){const e=this.screenToWorld().apply(0,0),n=this.screenToWorld().apply(this.width,this.height);return new q(e.x,e.y,n.x,n.y)}viewBox(){const e=this.world();return`${e.xMin} ${e.yMin} ${e.width} ${e.height}`}}class ep{constructor(e){this.viewport=e}scaleMin=Number.MIN_VALUE;scaleMax=Number.MAX_VALUE;boundingBox=q.infinity();setViewport(e){this.viewport=e}setScaleExtent(e){return e.min!==void 0&&(this.scaleMin=e.min),e.max!==void 0&&(this.scaleMax=e.max),this}scaleExtent(){return{min:this.scaleMin,max:this.scaleMax}}setTranslationExtent(e){return e.xMin!==void 0&&(this.boundingBox.xMin=e.xMin),e.yMin!==void 0&&(this.boundingBox.yMin=e.yMin),e.xMax!==void 0&&(this.boundingBox.xMax=e.xMax),e.yMax!==void 0&&(this.boundingBox.yMax=e.yMax),this}translationExtent(){return this.boundingBox}limitScale(e){return At(this.scaleMin,this.scaleMax,e)}limitTranslation(e,n){return e=At(this.boundingBox.xMin,this.boundingBox.xMax,e),n=At(this.boundingBox.yMin,this.boundingBox.yMax,n),{x:e,y:n}}scaleBy(e){const n=this.limitScale(this.viewport.scale()*e);this.viewport.scaleTo(n)}scaleTo(e){const n=this.limitScale(e);this.viewport.scaleTo(n)}moveBy(e,n){const{x:r,y:i}=this.viewport.center(),o=this.limitTranslation(r+e,i+n);this.viewport.moveTo(o.x,o.y)}moveTo(e,n){const r=this.limitTranslation(e,n);this.viewport.moveTo(r.x,r.y)}}function Pr(t){return Object.prototype.toString.call(t)==="[object Date]"}function tp(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function kn(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>kn(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Pr(t)&&Pr(e)){t=t.getTime(),e=e.getTime();const o=e-t;return s=>new Date(t+s*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=kn(t[o],e[o])}),o=>{const s={};return r.forEach(a=>{s[a]=i[a](o)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function np(t,e={}){const n=ln(t);let r,i=t;function o(s,a){if(t==null)return n.set(t=s),Promise.resolve();i=s;let l=r,h=!1,{delay:u=0,duration:c=400,easing:f=Po,interpolate:d=kn}=Ie(Ie({},e),a);if(c===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const g=Ro()+u;let y;return r=Do(T=>{if(T<g)return!0;h||(y=d(t,s),typeof c=="function"&&(c=c(t,s)),h=!0),l&&(l.abort(),l=null);const S=T-g;return S>c?(n.set(t=s),!1):(n.set(t=y(f(S/c))),!0)}),r.promise}return{set:o,update:(s,a)=>o(s(i,t),a),subscribe:n.subscribe}}function rp(t){let e,n,r,i,o;return{c(){e=V("rect"),this.h()},l(s){e=F(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),L(e).forEach(E),this.h()},h(){p(e,"x",n=t[0].xMin),p(e,"y",r=t[0].yMin),p(e,"width",i=t[0].width),p(e,"height",o=t[0].height),p(e,"fill","grey"),p(e,"opacity","0.2")},m(s,a){I(s,e,a)},p(s,[a]){a&1&&n!==(n=s[0].xMin)&&p(e,"x",n),a&1&&r!==(r=s[0].yMin)&&p(e,"y",r),a&1&&i!==(i=s[0].width)&&p(e,"width",i),a&1&&o!==(o=s[0].height)&&p(e,"height",o)},i:Y,o:Y,d(s){s&&E(e)}}}function ip(t,e,n){let r,{start:i}=e,{end:o}=e;return t.$$set=s=>{"start"in s&&n(1,i=s.start),"end"in s&&n(2,o=s.end)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=q.fromPoints(i,o))},[r,i,o]}class op extends ae{constructor(e){super(),le(this,e,ip,rp,se,{start:1,end:2})}}function sp(t){let e,n,r;return{c(){e=V("defs"),n=V("marker"),r=V("path"),this.h()},l(i){e=F(i,"defs",{});var o=L(e);n=F(o,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerUnits:!0,markerWidth:!0,markerHeight:!0,orient:!0});var s=L(n);r=F(s,"path",{d:!0,fill:!0,style:!0}),L(r).forEach(E),s.forEach(E),o.forEach(E),this.h()},h(){p(r,"d","M 0 0 L 10 5 L 0 10 L 4 5 z"),p(r,"fill","var(--gray-tertiary)"),Lo(r,"stroke-width","1"),p(n,"id","arrowhead"),p(n,"viewBox","0 0 10 10"),p(n,"refX","9"),p(n,"refY","5"),p(n,"markerUnits","strokeWidth"),p(n,"markerWidth","10"),p(n,"markerHeight","12"),p(n,"orient","auto")},m(i,o){I(i,e,o),B(e,n),B(n,r)},p:Y,d(i){i&&E(e)}}}function ap(t){let e;const n=t[1].default,r=Ur(n,t,t[2],null),i=r||sp();return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r&&r.p&&(!e||s&4)&&Kr(r,n,o,o[2],e?Qr(n,o[2],s,null):Zr(o[2]),null)},i(o){e||(P(i,o),e=!0)},o(o){D(i,o),e=!1},d(o){i&&i.d(o)}}}function lp(t){let e,n;return e=new Ln({props:{self:t[0],$$slots:{default:[ap]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,i){Q(e,r,i),n=!0},p(r,[i]){const o={};i&1&&(o.self=r[0]),i&4&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function up(t,e,n){let{$$slots:r={},$$scope:i}=e,{self:o}=e;return t.$$set=s=>{"self"in s&&n(0,o=s.self),"$$scope"in s&&n(2,i=s.$$scope)},[o,r,i]}class hp extends ae{constructor(e){super(),le(this,e,up,lp,se,{self:0})}}function Lr(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r}function Ir(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r}function Ar(t,e,n){const r=t.slice();return r[34]=e[n][0],r[40]=e[n][1].name,r[41]=e[n][1].boundingBox,r}function Rr(t,e){let n,r,i;function o(...s){return e[19](e[34],...s)}return r=new Jd({props:{nodeId:e[34],name:e[40],boundingBox:e[41]}}),r.$on("dblclick",o),r.$on("nodeEnter",e[20]),r.$on("nodeLeave",e[21]),{key:t,first:null,c(){n=G(),Z(r.$$.fragment),this.h()},l(s){n=G(),oe(r.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){I(s,n,a),Q(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.nodeId=e[34]),a[0]&4&&(l.name=e[40]),a[0]&4&&(l.boundingBox=e[41]),r.$set(l)},i(s){i||(P(r.$$.fragment,s),i=!0)},o(s){D(r.$$.fragment,s),i=!1},d(s){s&&E(n),J(r,s)}}}function Dr(t,e){let n,r,i;function o(...s){return e[22](e[34],...s)}return r=new An({props:{self:e[35],decoration:e[1].get(e[34])}}),r.$on("click",o),r.$on("nodeEnter",e[23]),r.$on("nodeLeave",e[24]),{key:t,first:null,c(){n=G(),Z(r.$$.fragment),this.h()},l(s){n=G(),oe(r.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){I(s,n,a),Q(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.self=e[35]),a[0]&6&&(l.decoration=e[1].get(e[34])),r.$set(l)},i(s){i||(P(r.$$.fragment,s),i=!0)},o(s){D(r.$$.fragment,s),i=!1},d(s){s&&E(n),J(r,s)}}}function Br(t,e){let n,r,i;function o(...s){return e[25](e[34],...s)}return r=new An({props:{self:e[35],decoration:e[1].get(e[34])}}),r.$on("dblclick",o),r.$on("nodeEnter",e[26]),r.$on("nodeLeave",e[27]),{key:t,first:null,c(){n=G(),Z(r.$$.fragment),this.h()},l(s){n=G(),oe(r.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){I(s,n,a),Q(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.self=e[35]),a[0]&6&&(l.decoration=e[1].get(e[34])),r.$set(l)},i(s){i||(P(r.$$.fragment,s),i=!0)},o(s){D(r.$$.fragment,s),i=!1},d(s){s&&E(n),J(r,s)}}}function $r(t){let e,n;return e=new op({props:{start:t[3].start,end:t[3].end}}),{c(){Z(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,i){Q(e,r,i),n=!0},p(r,i){const o={};i[0]&8&&(o.start=r[3].start),i[0]&8&&(o.end=r[3].end),e.$set(o)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function cp(t){let e,n,r=[],i=new Map,o,s,a=[],l=new Map,h,u=[],c=new Map,f,d,g,y,T,S,b,w,m,_,k=ge([...t[2].expanded.entries()]);const C=N=>N[34];for(let N=0;N<k.length;N+=1){let v=Ar(t,k,N),O=C(v);i.set(O,r[N]=Rr(O,v))}s=new hp({props:{self:t[2].edges}});let A=ge([...t[2].nodes.entries()]);const W=N=>N[34];for(let N=0;N<A.length;N+=1){let v=Ir(t,A,N),O=W(v);l.set(O,a[N]=Dr(O,v))}let X=ge([...t[2].collapsed.entries()]);const K=N=>N[34];for(let N=0;N<X.length;N+=1){let v=Lr(t,X,N),O=K(v);c.set(O,u[N]=Br(O,v))}let $=t[3].kind==="brushing"&&$r(t);return g=new Kd({props:{nodeLayouts:t[2].nodes}}),g.$on("nodeEnter",t[28]),g.$on("nodeLeave",t[29]),{c(){e=V("svg"),n=V("g");for(let N=0;N<r.length;N+=1)r[N].c();o=G(),Z(s.$$.fragment);for(let N=0;N<a.length;N+=1)a[N].c();h=G();for(let N=0;N<u.length;N+=1)u[N].c();f=G(),$&&$.c(),d=G(),Z(g.$$.fragment),this.h()},l(N){e=F(N,"svg",{role:!0,width:!0,height:!0,style:!0});var v=L(e);n=F(v,"g",{transform:!0});var O=L(n);for(let j=0;j<r.length;j+=1)r[j].l(O);o=G(),oe(s.$$.fragment,O);for(let j=0;j<a.length;j+=1)a[j].l(O);h=G();for(let j=0;j<u.length;j+=1)u[j].l(O);f=G(),$&&$.l(O),d=G(),oe(g.$$.fragment,O),O.forEach(E),v.forEach(E),this.h()},h(){p(n,"transform",y=t[6].toString()),p(e,"role","figure"),p(e,"width",T=t[0].screenWidth()),p(e,"height",S=t[0].screenHeight()),p(e,"style",b=`cursor: ${t[5]}`)},m(N,v){I(N,e,v),B(e,n);for(let O=0;O<r.length;O+=1)r[O]&&r[O].m(n,null);B(n,o),Q(s,n,null);for(let O=0;O<a.length;O+=1)a[O]&&a[O].m(n,null);B(n,h);for(let O=0;O<u.length;O+=1)u[O]&&u[O].m(n,null);B(n,f),$&&$.m(n,null),B(n,d),Q(g,n,null),t[30](e),w=!0,m||(_=[H(window,"mousemove",t[9]),H(window,"mouseup",t[8]),H(window,"keydown",t[14]),H(window,"keyup",t[15]),H(e,"mousedown",t[7]),H(e,"wheel",t[10])],m=!0)},p(N,v){v[0]&2052&&(k=ge([...N[2].expanded.entries()]),ce(),r=St(r,v,C,1,N,k,i,n,Ot,Rr,o,Ar),fe());const O={};v[0]&4&&(O.self=N[2].edges),s.$set(O),v[0]&8198&&(A=ge([...N[2].nodes.entries()]),ce(),a=St(a,v,W,1,N,A,l,n,Ot,Dr,h,Ir),fe()),v[0]&4102&&(X=ge([...N[2].collapsed.entries()]),ce(),u=St(u,v,K,1,N,X,c,n,Ot,Br,f,Lr),fe()),N[3].kind==="brushing"?$?($.p(N,v),v[0]&8&&P($,1)):($=$r(N),$.c(),P($,1),$.m(n,d)):$&&(ce(),D($,1,1,()=>{$=null}),fe());const j={};v[0]&4&&(j.nodeLayouts=N[2].nodes),g.$set(j),(!w||v[0]&64&&y!==(y=N[6].toString()))&&p(n,"transform",y),(!w||v[0]&1&&T!==(T=N[0].screenWidth()))&&p(e,"width",T),(!w||v[0]&1&&S!==(S=N[0].screenHeight()))&&p(e,"height",S),(!w||v[0]&32&&b!==(b=`cursor: ${N[5]}`))&&p(e,"style",b)},i(N){if(!w){for(let v=0;v<k.length;v+=1)P(r[v]);P(s.$$.fragment,N);for(let v=0;v<A.length;v+=1)P(a[v]);for(let v=0;v<X.length;v+=1)P(u[v]);P($),P(g.$$.fragment,N),w=!0}},o(N){for(let v=0;v<r.length;v+=1)D(r[v]);D(s.$$.fragment,N);for(let v=0;v<a.length;v+=1)D(a[v]);for(let v=0;v<u.length;v+=1)D(u[v]);D($),D(g.$$.fragment,N),w=!1},d(N){N&&E(e);for(let v=0;v<r.length;v+=1)r[v].d();J(s);for(let v=0;v<a.length;v+=1)a[v].d();for(let v=0;v<u.length;v+=1)u[v].d();$&&$.d(),J(g),t[30](null),m=!1,Gt(_)}}}function fp(t){switch(t.kind){case"initial":return"grab";case"panning":return"grabbing";case"brushing":case"awaitBrushing":return"default"}}function dp(t,e,n){let r,i,o,{decorations:s}=e,{drawable:a}=e,{viewport:l}=e,{multiSelection:h}=e;const u=new ep(l);let c;function f(M){let R=c.createSVGPoint();return"targetTouches"in M?(R.x=M.targetTouches[0].clientX,R.y=M.targetTouches[0].clientY):(R.x=M.clientX,R.y=M.clientY),R=R.matrixTransform(c.getScreenCTM()?.inverse()),R}let d={kind:"initial"};function g(M){if(M.preventDefault(),!("targetTouches"in M)&&M.button!==0)return;const{x:R,y:pe}=f(M),te=l.screenToWorld().apply(R,pe);M.shiftKey&&h?n(3,d={kind:"brushing",start:te,end:te}):(n(3,d={kind:"panning",start:te,tmp:new Fn(l.screenWidth(),l.screenHeight(),l.center(),l.scale())}),u.setViewport(d.tmp))}function y(){switch(d.kind){case"initial":return;case"panning":{l.scaleTo(d.tmp.scale());const{x:M,y:R}=d.tmp.center();l.moveTo(M,R),u.setViewport(l),n(3,d={kind:"initial"});break}case"brushing":{const M=q.fromPoints(d.start,d.end),R=[...a.nodes.entries()].filter(([pe,te])=>M.encloses(te.boundingBox())).map(([pe,te])=>pe);w("brush",{nodes:R});break}}n(3,d={kind:"initial"})}function T(M){const{x:R,y:pe}=f(M),te=l.screenToWorld().apply(R,pe);switch(d.kind){case"initial":return;case"panning":{const Oe=d.start.x-te.x,Ee=d.start.y-te.y;u.moveBy(Oe,Ee),n(0,l);break}case"brushing":{n(3,d.end=te,d);break}}}function S(M){M.preventDefault();const R=-M.deltaY*(M.deltaMode===1?.05:M.deltaMode?1:.002),pe=l.scale();if(u.scaleBy(Math.pow(2,R)),pe===l.scale())return;const te=l.center(),{x:Oe,y:Ee}=f(M),Be=l.screenToWorld().apply(Oe,Ee);u.moveBy(-(te.x-Be.x)*R,-(te.y-Be.y)*R),n(0,l)}async function b(M,R){const pe=q.fromCenterAndDimension(M.center,Math.max(l.screenWidth(),M.width),Math.max(l.screenHeight(),M.height)),{x:te,y:Oe}=pe.center,Ee=Math.min(l.screenWidth()/M.width,l.screenHeight()/M.height)||1;if(R!==void 0&&R){const Be=np({...l.center(),k:l.scale()},{duration:1e3,easing:tp});Be.subscribe(Pe=>{u.moveTo(Pe.x,Pe.y),u.scaleTo(Pe.k),n(0,l)}),await Be.set({x:te,y:Oe,k:Ee})}else u.moveTo(te,Oe),u.scaleTo(Ee),n(0,l)}const w=nt();function m(M,R){M.stopPropagation(),w("collapse",{nodeId:R})}function _(M,R){M.stopPropagation(),w("expand",{nodeId:R})}function k(M,R){M.stopPropagation(),w("nodeClick",{nodeId:R,original:M})}function C(M){d.kind==="initial"&&M.shiftKey&&h&&n(3,d={kind:"awaitBrushing"})}function A(){d.kind==="awaitBrushing"&&n(3,d={kind:"initial"})}const W=(M,R)=>{m(R,M)};function X(M){ue.call(this,t,M)}function K(M){ue.call(this,t,M)}const $=(M,R)=>{k(R,M)};function N(M){ue.call(this,t,M)}function v(M){ue.call(this,t,M)}const O=(M,R)=>{_(R,M)};function j(M){ue.call(this,t,M)}function He(M){ue.call(this,t,M)}function we(M){ue.call(this,t,M)}function qe(M){ue.call(this,t,M)}function xe(M){Xe[M?"unshift":"push"](()=>{c=M,n(4,c)})}return t.$$set=M=>{"decorations"in M&&n(1,s=M.decorations),"drawable"in M&&n(2,a=M.drawable),"viewport"in M&&n(0,l=M.viewport),"multiSelection"in M&&n(16,h=M.multiSelection)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(18,r=l.world()),t.$$.dirty[0]&262149&&u.setScaleExtent({min:Math.min(l.screenWidth()/a.boundingBox.width,l.screenHeight()/a.boundingBox.height)*.5,max:1}).setTranslationExtent(a.boundingBox.padded({l:r.width*.4,r:r.width*.4,t:r.height*.4,b:r.height*.4})),t.$$.dirty[0]&1&&n(6,i=l.worldToScreen().toString()),t.$$.dirty[0]&8&&n(5,o=fp(d))},[l,s,a,d,c,o,i,g,y,T,S,m,_,k,C,A,h,b,r,W,X,K,$,N,v,O,j,He,we,qe,xe]}class pp extends ae{constructor(e){super(),le(this,e,dp,cp,se,{decorations:1,drawable:2,viewport:0,multiSelection:16,setFocus:17},null,[-1,-1])}get setFocus(){return this.$$.ctx[17]}}function gp(t){let e,n,r,i,o,s,a,l,h,u,c,f,d,g,y,T,S;return{c(){e=ne("div"),n=ne("canvas"),r=Ce(),i=V("svg"),o=V("rect"),c=V("rect"),this.h()},l(b){e=re(b,"DIV",{class:!0});var w=L(e);n=re(w,"CANVAS",{class:!0}),L(n).forEach(E),r=Te(w),i=F(w,"svg",{role:!0,width:!0,height:!0,class:!0});var m=L(i);o=F(m,"rect",{fill:!0,x:!0,y:!0,width:!0,height:!0,opacity:!0,style:!0}),L(o).forEach(E),c=F(m,"rect",{fill:!0,stroke:!0,x:!0,y:!0,width:!0,height:!0}),L(c).forEach(E),m.forEach(E),w.forEach(E),this.h()},h(){p(n,"class","svelte-133ndzu"),p(o,"fill","rgb(0, 122, 255)"),p(o,"x",s=t[6].x),p(o,"y",a=t[6].y),p(o,"width",l=t[6].w),p(o,"height",h=t[6].h),p(o,"opacity","0.1"),p(o,"style",u=t[5]?"cursor: grabbing":"cursor: grab"),p(c,"fill","none"),p(c,"stroke","rgb(0, 122, 255)"),p(c,"x",f=t[6].x),p(c,"y",d=t[6].y),p(c,"width",g=t[6].w),p(c,"height",y=t[6].h),p(i,"role","navigation"),p(i,"width",t[0]),p(i,"height",t[1]),p(i,"class","svelte-133ndzu"),p(e,"class","container svelte-133ndzu")},m(b,w){I(b,e,w),B(e,n),t[11](n),B(e,r),B(e,i),B(i,o),t[12](o),B(i,c),t[13](i),T||(S=H(i,"mousedown",t[7]),T=!0)},p(b,[w]){w&64&&s!==(s=b[6].x)&&p(o,"x",s),w&64&&a!==(a=b[6].y)&&p(o,"y",a),w&64&&l!==(l=b[6].w)&&p(o,"width",l),w&64&&h!==(h=b[6].h)&&p(o,"height",h),w&32&&u!==(u=b[5]?"cursor: grabbing":"cursor: grab")&&p(o,"style",u),w&64&&f!==(f=b[6].x)&&p(c,"x",f),w&64&&d!==(d=b[6].y)&&p(c,"y",d),w&64&&g!==(g=b[6].w)&&p(c,"width",g),w&64&&y!==(y=b[6].h)&&p(c,"height",y),w&1&&p(i,"width",b[0]),w&2&&p(i,"height",b[1])},i:Y,o:Y,d(b){b&&E(e),t[11](null),t[12](null),t[13](null),T=!1,S()}}}function mp(t,e,n){let r,i;const o=nt();function s(_){const k=r.worldToScreen().apply(_.xMin,_.yMin),C=r.worldToScreen().apply(_.xMax,_.yMax);return{x:k.x,y:k.y,w:C.x-k.x,h:C.y-k.y}}let{drawable:a}=e,{width:l}=e,{height:h}=e,{worldExtent:u}=e,c,f;function d(_){let k=f.createSVGPoint();k.x=_.clientX,k.y=_.clientY,k=k.matrixTransform(f.getScreenCTM()?.inverse());const C=r.screenToWorld().apply(k.x,k.y);o("viewportCenterDidChange",{center:C})}let g;function y(_){const k=r.screenToWorld().apply(0,0),C=r.screenToWorld().apply(_.dx,_.dy),A=u.center;A.x+=C.x-k.x,A.y+=C.y-k.y,o("viewportCenterDidChange",{center:A})}let T=!1;const S=Na().on("drag",y).on("start",()=>n(5,T=!0)).on("end",()=>n(5,T=!1));ni(()=>{ct(g).call(S)});function b(_){Xe[_?"unshift":"push"](()=>{c=_,n(2,c),n(0,l),n(1,h),n(8,a)})}function w(_){Xe[_?"unshift":"push"](()=>{g=_,n(4,g)})}function m(_){Xe[_?"unshift":"push"](()=>{f=_,n(3,f)})}return t.$$set=_=>{"drawable"in _&&n(8,a=_.drawable),"width"in _&&n(0,l=_.width),"height"in _&&n(1,h=_.height),"worldExtent"in _&&n(9,u=_.worldExtent)},t.$$.update=()=>{if(t.$$.dirty&3&&n(10,r=new Fn(l,h)),t.$$.dirty&1280&&r.fit(a.boundingBox.padded(2)),t.$$.dirty&512&&n(6,i=s(u)),t.$$.dirty&263&&c){let _=c.getContext("2d");n(2,c.width=l,c),n(2,c.height=h,c),_.fillStyle="white",_.fillRect(0,0,l,h),_.lineWidth=.5;for(const{boundingBox:k}of a.expanded.values()){const C=s(k);_.fillStyle="rgb(250, 250, 250)",_.fillRect(C.x,C.y,C.w,C.h),_.strokeStyle="rgb(134, 134, 139)",_.strokeRect(C.x,C.y,C.w,C.h)}for(const k of a.nodes.values()){const C=s(k.boundingBox());_.fillStyle="rgb(134, 134, 139)",_.fillRect(C.x,C.y,C.w,C.h)}for(const k of a.collapsed.values()){const C=s(k.boundingBox());_.fillStyle="rgb(134, 134, 139)",_.fillRect(C.x,C.y,C.w,C.h)}}},[l,h,c,f,g,T,i,d,a,u,r,b,w,m]}class wp extends ae{constructor(e){super(),le(this,e,mp,gp,se,{drawable:8,width:0,height:1,worldExtent:9})}}function Vr(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function _p(t){let e,n;return{c(){e=ne("span"),n=Ae(t[0]),this.h()},l(r){e=re(r,"SPAN",{class:!0});var i=L(e);n=Re(i,t[0]),i.forEach(E),this.h()},h(){p(e,"class","svelte-122vmdc")},m(r,i){I(r,e,i),B(e,n)},p(r,i){i&1&&_t(n,r[0])},d(r){r&&E(e)}}}function yp(t){let e,n,r,i,o=ge(t[3]),s=[];for(let u=0;u<o.length;u+=1)s[u]=Wr(Vr(t,o,u));function a(u,c){if(c&6&&(n=null),c&6&&(r=null),n==null&&(n=!!u[1].collapsed.has(u[2])),n)return vp;if(r==null&&(r=!!u[1].expanded.has(u[2])),r)return bp}let l=a(t,-1),h=l&&l(t);return{c(){for(let u=0;u<s.length;u+=1)s[u].c();e=Ce(),h&&h.c(),i=G()},l(u){for(let c=0;c<s.length;c+=1)s[c].l(u);e=Te(u),h&&h.l(u),i=G()},m(u,c){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(u,c);I(u,e,c),h&&h.m(u,c),I(u,i,c)},p(u,c){if(c&8){o=ge(u[3]);let f;for(f=0;f<o.length;f+=1){const d=Vr(u,o,f);s[f]?s[f].p(d,c):(s[f]=Wr(d),s[f].c(),s[f].m(e.parentNode,e))}for(;f<s.length;f+=1)s[f].d(1);s.length=o.length}l!==(l=a(u,c))&&(h&&h.d(1),h=l&&l(u),h&&(h.c(),h.m(i.parentNode,i)))},d(u){u&&(E(e),E(i)),Jr(s,u),h&&h.d(u)}}}function Fr(t){let e,n="";return{c(){e=ne("span"),e.textContent=n,this.h()},l(r){e=re(r,"SPAN",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-1wdicln"&&(e.textContent=n),this.h()},h(){p(e,"class","svelte-122vmdc")},m(r,i){I(r,e,i)},d(r){r&&E(e)}}}function Wr(t){let e,n=t[5]+"",r,i,o,s=t[7]<t[3].length-1&&Fr();return{c(){e=ne("span"),r=Ae(n),i=Ce(),s&&s.c(),o=G(),this.h()},l(a){e=re(a,"SPAN",{class:!0});var l=L(e);r=Re(l,n),l.forEach(E),i=Te(a),s&&s.l(a),o=G(),this.h()},h(){p(e,"class","svelte-122vmdc")},m(a,l){I(a,e,l),B(e,r),I(a,i,l),s&&s.m(a,l),I(a,o,l)},p(a,l){l&8&&n!==(n=a[5]+"")&&_t(r,n),a[7]<a[3].length-1?s||(s=Fr(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(a){a&&(E(e),E(i),E(o)),s&&s.d(a)}}}function bp(t){let e,n="(Double click to collapse)";return{c(){e=ne("span"),e.textContent=n,this.h()},l(r){e=re(r,"SPAN",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-ws6ene"&&(e.textContent=n),this.h()},h(){p(e,"class","svelte-122vmdc")},m(r,i){I(r,e,i)},d(r){r&&E(e)}}}function vp(t){let e,n="(Double click to expand)";return{c(){e=ne("span"),e.textContent=n,this.h()},l(r){e=re(r,"SPAN",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-1y68pwz"&&(e.textContent=n),this.h()},h(){p(e,"class","svelte-122vmdc")},m(r,i){I(r,e,i)},d(r){r&&E(e)}}}function xp(t){let e;function n(o,s){return o[2]?yp:_p}let r=n(t),i=r(t);return{c(){e=ne("div"),i.c()},l(o){e=re(o,"DIV",{});var s=L(e);i.l(s),s.forEach(E)},m(o,s){I(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null)))},i:Y,o:Y,d(o){o&&E(e),i.d()}}}function Ep(t,e,n){let r,{defaultText:i="Hover over any node to show more information."}=e,{network:o}=e,{drawable:s}=e,{currentNode:a}=e;return t.$$set=l=>{"defaultText"in l&&n(0,i=l.defaultText),"network"in l&&n(4,o=l.network),"drawable"in l&&n(1,s=l.drawable),"currentNode"in l&&n(2,a=l.currentNode)},t.$$.update=()=>{t.$$.dirty&20&&n(3,r=a?[a,...o.parents(a)].reverse().map(l=>o.node(l).humanReadable()||l):[])},[i,s,a,r,o]}class kp extends ae{constructor(e){super(),le(this,e,Ep,xp,se,{defaultText:0,network:4,drawable:1,currentNode:2})}}function zr(t){let e,n,r;function i(s){t[34](s)}let o={decorations:t[8],drawable:t[15],multiSelection:t[7]};return t[13]!==void 0&&(o.viewport=t[13]),e=new pp({props:o}),t[33](e),Xe.push(()=>Oo(e,"viewport",i)),e.$on("expand",t[18]),e.$on("collapse",t[19]),e.$on("nodeEnter",t[20]),e.$on("nodeLeave",t[21]),e.$on("nodeClick",t[22]),e.$on("brush",t[25]),{c(){Z(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,a){Q(e,s,a),r=!0},p(s,a){const l={};a[0]&256&&(l.decorations=s[8]),a[0]&32768&&(l.drawable=s[15]),a[0]&128&&(l.multiSelection=s[7]),!n&&a[0]&8192&&(n=!0,l.viewport=s[13],Ao(()=>n=!1)),e.$set(l)},i(s){r||(P(e.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),r=!1},d(s){t[33](null),J(e,s)}}}function Gr(t){let e,n,r,i,o,s=t[3]&&jr(t),a=t[17]&&Yr(t),l=t[4]&&Hr(t);return{c(){e=ne("div"),s&&s.c(),n=Ce(),r=ne("div"),a&&a.c(),i=Ce(),l&&l.c(),this.h()},l(h){e=re(h,"DIV",{class:!0});var u=L(e);s&&s.l(u),n=Te(u),r=re(u,"DIV",{class:!0});var c=L(r);a&&a.l(c),i=Te(c),l&&l.l(c),c.forEach(E),u.forEach(E),this.h()},h(){p(r,"class","myc-navigation-controls svelte-15hd81r"),p(e,"class","myc-navigation svelte-15hd81r")},m(h,u){I(h,e,u),s&&s.m(e,null),B(e,n),B(e,r),a&&a.m(r,null),B(r,i),l&&l.m(r,null),o=!0},p(h,u){h[3]?s?(s.p(h,u),u[0]&8&&P(s,1)):(s=jr(h),s.c(),P(s,1),s.m(e,n)):s&&(ce(),D(s,1,1,()=>{s=null}),fe()),h[17]?a?a.p(h,u):(a=Yr(h),a.c(),a.m(r,i)):a&&(a.d(1),a=null),h[4]?l?l.p(h,u):(l=Hr(h),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},i(h){o||(P(s),o=!0)},o(h){D(s),o=!1},d(h){h&&E(e),s&&s.d(),a&&a.d(),l&&l.d()}}}function jr(t){let e,n;return e=new kp({props:{network:t[0],currentNode:t[16],drawable:t[15]}}),{c(){Z(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,i){Q(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.network=r[0]),i[0]&65536&&(o.currentNode=r[16]),i[0]&32768&&(o.drawable=r[15]),e.$set(o)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Yr(t){let e,n,r="Collapse All",i,o;return{c(){e=ne("div"),n=ne("button"),n.textContent=r,this.h()},l(s){e=re(s,"DIV",{});var a=L(e);n=re(a,"BUTTON",{class:!0,"data-svelte-h":!0}),rt(n)!=="svelte-7o3ux6"&&(n.textContent=r),a.forEach(E),this.h()},h(){p(n,"class","resetView svelte-15hd81r")},m(s,a){I(s,e,a),B(e,n),i||(o=H(n,"click",t[35]),i=!0)},p:Y,d(s){s&&E(e),i=!1,o()}}}function Hr(t){let e,n,r="Show All",i,o;return{c(){e=ne("div"),n=ne("button"),n.textContent=r,this.h()},l(s){e=re(s,"DIV",{});var a=L(e);n=re(a,"BUTTON",{class:!0,"data-svelte-h":!0}),rt(n)!=="svelte-z7thqi"&&(n.textContent=r),a.forEach(E),this.h()},h(){p(n,"class","resetView svelte-15hd81r")},m(s,a){I(s,e,a),B(e,n),i||(o=H(n,"click",t[36]),i=!0)},p:Y,d(s){s&&E(e),i=!1,o()}}}function qr(t){let e,n,r="Mycelium";return{c(){e=Ae("Powered by "),n=ne("a"),n.textContent=r,this.h()},l(i){e=Re(i,"Powered by "),n=re(i,"A",{href:!0,target:!0,class:!0,"data-svelte-h":!0}),rt(n)!=="svelte-j6ykrk"&&(n.textContent=r),this.h()},h(){p(n,"href","https://apple.github.io/ml-mycelium"),p(n,"target","_blank"),p(n,"class","svelte-15hd81r")},m(i,o){I(i,e,o),I(i,n,o)},d(i){i&&(E(e),E(n))}}}function Xr(t){let e,n,r;return n=new wp({props:{width:t[1]*Tt,height:t[2]*Tt,worldExtent:t[13].world(),drawable:t[15]}}),n.$on("viewportCenterDidChange",t[24]),{c(){e=ne("div"),Z(n.$$.fragment),this.h()},l(i){e=re(i,"DIV",{class:!0});var o=L(e);oe(n.$$.fragment,o),o.forEach(E),this.h()},h(){p(e,"class","myc-minimap svelte-15hd81r")},m(i,o){I(i,e,o),Q(n,e,null),r=!0},p(i,o){const s={};o[0]&2&&(s.width=i[1]*Tt),o[0]&4&&(s.height=i[2]*Tt),o[0]&8192&&(s.worldExtent=i[13].world()),o[0]&32768&&(s.drawable=i[15]),n.$set(s)},i(i){r||(P(n.$$.fragment,i),r=!0)},o(i){D(n.$$.fragment,i),r=!1},d(i){i&&E(e),J(n)}}}function Mp(t){let e,n=t[0],r,i,o,s,a,l,h,u=zr(t),c=(t[3]||t[4])&&Gr(t),f=t[5]&&qr(),d=t[6]&&Xr(t);return{c(){e=ne("div"),u.c(),r=Ce(),c&&c.c(),i=Ce(),o=ne("div"),f&&f.c(),s=Ce(),d&&d.c(),this.h()},l(g){e=re(g,"DIV",{class:!0});var y=L(e);u.l(y),r=Te(y),c&&c.l(y),i=Te(y),o=re(y,"DIV",{class:!0});var T=L(o);f&&f.l(T),T.forEach(E),s=Te(y),d&&d.l(y),y.forEach(E),this.h()},h(){p(o,"class","myc-overlay svelte-15hd81r"),p(e,"class","myc-container svelte-15hd81r")},m(g,y){I(g,e,y),u.m(e,null),B(e,r),c&&c.m(e,null),B(e,i),B(e,o),f&&f.m(o,null),B(e,s),d&&d.m(e,null),a=!0,l||(h=H(window,"keydown",t[23]),l=!0)},p(g,y){y[0]&1&&se(n,n=g[0])?(ce(),D(u,1,1,Y),fe(),u=zr(g),u.c(),P(u,1),u.m(e,r)):u.p(g,y),g[3]||g[4]?c?(c.p(g,y),y[0]&24&&P(c,1)):(c=Gr(g),c.c(),P(c,1),c.m(e,i)):c&&(ce(),D(c,1,1,()=>{c=null}),fe()),g[5]?f||(f=qr(),f.c(),f.m(o,null)):f&&(f.d(1),f=null),g[6]?d?(d.p(g,y),y[0]&64&&P(d,1)):(d=Xr(g),d.c(),P(d,1),d.m(e,null)):d&&(ce(),D(d,1,1,()=>{d=null}),fe())},i(g){a||(P(u),P(c),P(d),a=!0)},o(g){D(u),D(c),D(d),a=!1},d(g){g&&E(e),u.d(g),c&&c.d(),f&&f.d(),d&&d.d(),l=!1,h()}}}const Tt=.2;function Np(t,e,n){let r,i,o,s,a=Y,l=()=>(a(),a=Wn(A,x=>n(37,s=x)),A),h,u=Y,c=()=>(u(),u=Wn(W,x=>n(38,h=x)),W);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>u());let{network:f}=e,{width:d}=e,{height:g}=e,{showBreadcrumbs:y}=e,{showResetView:T}=e,{watermark:S}=e,{minimap:b}=e,{autoResize:w}=e,{multiSelection:m}=e,{decorations:_=new Map}=e,{collapsed:k=new Set(f.modules())}=e,{layoutProvider:C}=e;const A=ln(new Map);l();const W=ln(new Map);c(),Io(In,{selections:A,tooltips:W});const X=new Map,K=nt();function $(x,z){N.resize(x,z),n(13,N)}let N=new Fn(d,g);ni(async()=>{await we()});let v=[],O;function j(x){const{yMin:z,yMax:U}=x,ie=20,$e=y?25/(N.screenHeight()||1)*(U-z):0;return x.padded({l:ie,r:ie,t:ie+$e,b:ie})}async function He(x,z){x=Array.isArray(x)?x:[x];let U=q.infinity();for(const ie of x){const $e=i.nodes.get(ie)?.boundingBox();$e&&(U=U.union($e))}U.isEmpty()||await O.setFocus(j(U),z)}async function we(x){await O.setFocus(j(i.boundingBox),x)}async function qe(x,z){!m&&x.length>1&&(console.warn("Received multiple selections but `multiSelection` config was set to `false`."),x=[x[0]]);const U={expand:!0,collapseOthers:{threshold:1e3},...z},{expand:ie,collapse:$e}=Bd(f,x,k,U);let Kt=!1;U.expand&&(ie.size>1&&U.expand==="single"||ie.size>0&&(ie.forEach(Ve=>k.delete(Ve)),Kt=!0)),$e.size>0&&U.collapseOthers!==!1&&(U.collapseOthers===!0||$d(f,k)>U.collapseOthers.threshold)&&($e.forEach(Ve=>k.add(Ve)),Kt=!0),Kt?(n(26,k),await xt(),Zt(A,s=new Map(x.map(Ve=>[Ve,new Set])),s),await we(!0)):Zt(A,s=new Map(x.map(Ve=>[Ve,new Set])),s)}async function xe(x){const z=s;return Zt(A,s=x,s),await xt(),z}async function M(){return await xe(new Map)}async function R(){n(26,k=new Set(f.modules())),await we(!0)}async function pe(x){Ee(x),k.delete(x.detail.nodeId),n(26,k),await xt(),await we(!0)}async function te(x){Ee(x),k.add(x.detail.nodeId),n(26,k),await xt(),await we(!0)}function Oe(x){v[v.length-1]!==x.detail.nodeId&&(v.push(x.detail.nodeId),n(32,v));const z=x.detail.nodeId,U=i.nodes.get(z)?.options.tooltip;if(U){const ie=h.get(z);ie===void 0?X.set(z,Yd(W,z,U().build())):ie.state!=="active"&&ie.state!=="pinned"&&bo(W,z)}}function Ee(x){v.pop(),n(32,v);const z=x.detail.nodeId;clearTimeout(X.get(z)),vo(W,z)}async function Be(x){i.nodes.get(x.detail.nodeId)?.options.selectable&&(m&&x.detail.original.metaKey?Pe(await xe(new Map([...s.entries(),[x.detail.nodeId,new Set]]))):Pe(await xe(new Map([[x.detail.nodeId,new Set]]))))}function Pe(x){const z=([U,ie])=>({primaryNodeId:U,secondaryIds:[...ie.values()]});K("selectionDidChange",{selections:[...s.entries()].map(z),previous:[...x.entries()].map(z)})}async function Eo(x){x.key==="Escape"&&Pe(await M())}function ko(x){const{x:z,y:U}=x.detail.center;N.moveTo(z,U),n(13,N)}async function Mo(x){Pe(await xe(new Map(x.detail.nodes.map(z=>[z,new Set]))))}function No(x){Xe[x?"unshift":"push"](()=>{O=x,n(14,O)})}function Co(x){N=x,n(13,N)}const To=()=>R(),So=async()=>{await we(!0)};return t.$$set=x=>{"network"in x&&n(0,f=x.network),"width"in x&&n(1,d=x.width),"height"in x&&n(2,g=x.height),"showBreadcrumbs"in x&&n(3,y=x.showBreadcrumbs),"showResetView"in x&&n(4,T=x.showResetView),"watermark"in x&&n(5,S=x.watermark),"minimap"in x&&n(6,b=x.minimap),"autoResize"in x&&n(27,w=x.autoResize),"multiSelection"in x&&n(7,m=x.multiSelection),"decorations"in x&&n(8,_=x.decorations),"collapsed"in x&&n(26,k=x.collapsed),"layoutProvider"in x&&n(28,C=x.layoutProvider)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(17,r=k.size<f.modules().length),t.$$.dirty[0]&335544321&&n(15,i=C.compute(f,k)),t.$$.dirty[0]&6&&$(d,g),t.$$.dirty[1]&2&&n(16,o=v.at(v.length-1))},[f,d,g,y,T,S,b,m,_,A,W,we,R,N,O,i,o,r,pe,te,Oe,Ee,Be,Eo,ko,Mo,k,w,C,He,qe,M,v,No,Co,To,So]}class Cp extends ae{constructor(e){super(),le(this,e,Np,Mp,se,{network:0,width:1,height:2,showBreadcrumbs:3,showResetView:4,watermark:5,minimap:6,autoResize:27,multiSelection:7,decorations:8,collapsed:26,layoutProvider:28,selectionStore:9,tooltipStore:10,setFocus:29,resetFocus:11,setSelections:30,clearSelections:31,collapseAll:12},null,[-1,-1])}get selectionStore(){return this.$$.ctx[9]}get tooltipStore(){return this.$$.ctx[10]}get setFocus(){return this.$$.ctx[29]}get resetFocus(){return this.$$.ctx[11]}get setSelections(){return this.$$.ctx[30]}get clearSelections(){return this.$$.ctx[31]}get collapseAll(){return this.$$.ctx[12]}}class xo{constructor(e,n){this.app=e,this.options=n,this.decorations=new Map}decorations;static create(e,n,r){const i={width:n.getBoundingClientRect().width,height:n.getBoundingClientRect().height,autoResize:!0,showBreadcrumbs:!0,showResetView:!0,watermark:!0,minimap:!0,layoutProvider:new Dd,multiSelection:!0,...r};i.watermark&&(console.info(""),console.info("| Powered by the Mycelium network     |"),console.info("| visualizer. For more information:   |"),console.info("| https://apple.github.io/ml-mycelium |"),console.info(""));const o=new Cp({target:n,props:{network:e,...i}});return i.autoResize&&new ResizeObserver(()=>{o.$set({width:n.clientWidth,height:n.clientHeight})}).observe(n),new xo(o,i)}onSelectionDidChange(e){this.app.$on("selectionDidChange",n=>{e(n.detail)})}async setSelection(e,n){await this.app.setSelections([e],n)}async setSelections(e,n){await this.app.setSelections(e,n)}async collapseAll(){await this.app.collapseAll()}async clearSelections(){await this.app.clearSelections()}async setFocus(e,n){await this.app.setFocus(e,n)}async resetFocus(e){await this.app.resetFocus(e)}setDecoration(e,n){this.decorations.set(e,n),this.app.$set({decorations:this.decorations})}removeDecoration(e){this.decorations.delete(e),this.app.$set({decorations:this.decorations})}clearDecorations(){this.decorations.clear(),this.app.$set({decorations:this.decorations})}setNetwork(e){this.app.$set({network:e,collapsed:new Set(e.modules())})}getOptions(){return this.options}}export{du as H,_o as N,Tu as T,pu as V,$p as a,xo as b,ye as c,Vp as d,Ip as e,Wu as g};
